{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/VideoStream.vue?cad6","webpack:///./src/components/VideoCropControls.vue?a278","webpack:///./src/components/UserFacingScreening.vue?e792","webpack:///./src/components/CalibrationSettings.vue?7954","webpack:///./src/components/DeveloperUtilities.vue?02c5","webpack:///./src/App.vue?372a","webpack:///./src/components/VideoStream.vue?a8c7","webpack:///./src/App.vue?3c51","webpack:///./src/components/UserFacingScreening.vue?3e21","webpack:///./src/components/VideoCropControls.vue?3f27","webpack:///./src/components/DeveloperUtilities.vue?eb2b","webpack:///./src/App.vue?275a","webpack:///./src/components/UserFacingScreening.vue?3e46","webpack:///./src/types.ts","webpack:///./src/utils.ts","webpack:///./src/shape-processing.ts","webpack:///./src/components/AdminSettings.vue?4a71","webpack:///./src/components/CalibrationSettings.vue?0b29","webpack:///./src/components/VideoStream.vue?6f01","webpack:///./src/components/VideoCropControls.vue?bcdb","webpack:///./src/components/VideoCropControls.vue?c396","webpack:///./src/components/VideoCropControls.vue?5d6f","webpack:///./src/components/VideoCropControls.vue","webpack:///./src/components/VideoStream.vue?5585","webpack:///./src/components/VideoStream.vue?471f","webpack:///./src/components/VideoStream.vue","webpack:///./src/api/api.ts","webpack:///./src/components/CalibrationSettings.vue?06bc","webpack:///./src/components/CalibrationSettings.vue?e391","webpack:///./src/components/CalibrationSettings.vue","webpack:///./src/components/DeviceInfo.vue?f953","webpack:///./src/components/DeviceInfo.vue?2712","webpack:///./src/components/DeviceInfo.vue?761b","webpack:///./src/components/DeviceInfo.vue","webpack:///./src/components/DeveloperUtilities.vue?a484","webpack:///./src/components/DeveloperUtilities.vue?7ef6","webpack:///./src/components/DeveloperUtilities.vue?0d4b","webpack:///./src/components/DeveloperUtilities.vue","webpack:///./src/components/AdminSettings.vue?6ecc","webpack:///./src/components/AdminSettings.vue?d215","webpack:///./src/components/AdminSettings.vue","webpack:///./src/geom.ts","webpack:///./src/components/UserFacingScreening.vue?ff9d","webpack:///./src/components/UserFacingScreening.vue?6fb7","webpack:///./src/components/UserFacingScreening.vue","webpack:///./src/camera.ts","webpack:///./src/App.vue?86e8","webpack:///./src/App.vue?93a9","webpack:///./src/App.vue","webpack:///./src/plugins/vuetify.ts","webpack:///./src/main.ts","webpack:///./src/frame-listener.ts","webpack:///./src/components/CalibrationSettings.vue?f4df"],"names":[],"mappings":";QAAA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA,QAAQ,oBAAoB;QAC5B;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA,iBAAiB,4BAA4B;QAC7C;QACA;QACA,kBAAkB,2BAA2B;QAC7C;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;;QAEA;;QAEA;QACA;QACA,6CAA6C,6BAA6B,4BAA4B;QACtG;;QAEA;QACA;;QAEA,6BAA6B,0BAA0B;;QAEvD;QACA;QACA;QACA;QACA;QACA;QACA,OAAO;QACP;QACA;QACA,OAAO;QACP;QACA;QACA,OAAO;QACP;QACA;QACA,OAAO;QACP;QACA;QACA;QACA;QACA;QACA,IAAI;QACJ;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;QAEA;QACA;QACA;QACA;;;QAGA;;QAEA;QACA,iCAAiC;;QAEjC;QACA;QACA;QACA,KAAK;QACL;QACA;QACA;QACA,MAAM;QACN;;QAEA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,wBAAwB,kCAAkC;QAC1D,MAAM;QACN;QACA;QACA;QACA;;QAEA;;QAEA,sBAAsB,0BAA0B;;QAEhD;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA,mDAAmD,8BAA8B;QACjF;QACA;QACA;QACA;QACA,OAAO;QACP,MAAM;QACN;QACA,MAAM;QACN,+CAA+C,wBAAwB,EAAE;QACzE;QACA;QACA,OAAO;QACP;QACA;QACA;QACA,MAAM;QACN;QACA,IAAI;QACJ;QACA;;QAEA;QACA;;QAEA;QACA;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","file":"js/app.2726b238.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-2d843444\":\"e21bc1d7\"}[chunkId] + \".js\"\n \t}\n\n \t// object to store loaded and loading wasm modules\n \tvar installedWasmModules = {};\n\n \tfunction promiseResolve() { return Promise.resolve(); }\n\n \tvar wasmImportObjects = {\n \t\t\"3826\": function() {\n \t\t\treturn {\n \t\t\t\t\"./curve_fitting_bg.js\": {\n \t\t\t\t\t\"__wbindgen_number_new\": function(p0f64) {\n \t\t\t\t\t\treturn installedModules[\"f470\"].exports[\"c\"](p0f64);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbindgen_object_drop_ref\": function(p0i32) {\n \t\t\t\t\t\treturn installedModules[\"f470\"].exports[\"d\"](p0i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_new_6b6f346b4912cdae\": function() {\n \t\t\t\t\t\treturn installedModules[\"f470\"].exports[\"a\"]();\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_push_f353108e20ec67a0\": function(p0i32,p1i32) {\n \t\t\t\t\t\treturn installedModules[\"f470\"].exports[\"b\"](p0i32,p1i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbindgen_throw\": function(p0i32,p1i32) {\n \t\t\t\t\t\treturn installedModules[\"f470\"].exports[\"e\"](p0i32,p1i32);\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t};\n \t\t},\n \t};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n\n \t\t// Fetch + compile chunk loading for webassembly\n\n \t\tvar wasmModules = {\"chunk-2d843444\":[\"3826\"]}[chunkId] || [];\n\n \t\twasmModules.forEach(function(wasmModuleId) {\n \t\t\tvar installedWasmModuleData = installedWasmModules[wasmModuleId];\n\n \t\t\t// a Promise means \"currently loading\" or \"already loaded\".\n \t\t\tif(installedWasmModuleData)\n \t\t\t\tpromises.push(installedWasmModuleData);\n \t\t\telse {\n \t\t\t\tvar importObject = wasmImportObjects[wasmModuleId]();\n \t\t\t\tvar req = fetch(__webpack_require__.p + \"\" + {\"3826\":\"f4cb4ffd0ca727aee03d\"}[wasmModuleId] + \".module.wasm\");\n \t\t\t\tvar promise;\n \t\t\t\tif(importObject instanceof Promise && typeof WebAssembly.compileStreaming === 'function') {\n \t\t\t\t\tpromise = Promise.all([WebAssembly.compileStreaming(req), importObject]).then(function(items) {\n \t\t\t\t\t\treturn WebAssembly.instantiate(items[0], items[1]);\n \t\t\t\t\t});\n \t\t\t\t} else if(typeof WebAssembly.instantiateStreaming === 'function') {\n \t\t\t\t\tpromise = WebAssembly.instantiateStreaming(req, importObject);\n \t\t\t\t} else {\n \t\t\t\t\tvar bytesPromise = req.then(function(x) { return x.arrayBuffer(); });\n \t\t\t\t\tpromise = bytesPromise.then(function(bytes) {\n \t\t\t\t\t\treturn WebAssembly.instantiate(bytes, importObject);\n \t\t\t\t\t});\n \t\t\t\t}\n \t\t\t\tpromises.push(installedWasmModules[wasmModuleId] = promise.then(function(res) {\n \t\t\t\t\treturn __webpack_require__.w[wasmModuleId] = (res.instance || res).exports;\n \t\t\t\t}));\n \t\t\t}\n \t\t});\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/static/dist/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \t// object with all WebAssembly.instance exports\n \t__webpack_require__.w = {};\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","// extracted by mini-css-extract-plugin","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoCropControls.vue?vue&type=style&index=0&id=45ccf73a&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoCropControls.vue?vue&type=style&index=0&id=45ccf73a&scoped=true&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFacingScreening.vue?vue&type=style&index=0&id=fedccc62&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFacingScreening.vue?vue&type=style&index=0&id=fedccc62&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeveloperUtilities.vue?vue&type=style&index=0&id=e0112a36&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeveloperUtilities.vue?vue&type=style&index=0&id=e0112a36&scoped=true&lang=scss&\"","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoStream.vue?vue&type=style&index=0&id=6544bfa0&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoStream.vue?vue&type=style&index=0&id=6544bfa0&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',{attrs:{\"id\":\"app\"},on:{\"skip-warmup\":_vm.skipWarmup}},[_c('UserFacingScreening',{attrs:{\"on-reference-device\":_vm.isReferenceDevice,\"state\":_vm.appState.currentScreeningState,\"screening-event\":_vm.appState.currentScreeningEvent,\"calibration\":_vm.appState.currentCalibration,\"face\":_vm.appState.face,\"warmup-seconds-remaining\":_vm.remainingWarmupTime,\"shapes\":[_vm.prevShape, _vm.nextShape]}}),_c('v-dialog',{attrs:{\"width\":\"500\"},model:{value:(_vm.showSoftwareVersionUpdatedPrompt),callback:function ($$v) {_vm.showSoftwareVersionUpdatedPrompt=$$v},expression:\"showSoftwareVersionUpdatedPrompt\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\" This software has been updated. \"+_vm._s(_vm.appVersion)+\" \")]),_c('v-card-actions',{attrs:{\"center\":\"\"}},[_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":function (e) { return (_vm.showSoftwareVersionUpdatedPrompt = false); }}},[_vm._v(\" Proceed \")])],1)],1)],1),_c('v-snackbar',{model:{value:(_vm.showUpdatedCalibrationSnackbar),callback:function ($$v) {_vm.showUpdatedCalibrationSnackbar=$$v},expression:\"showUpdatedCalibrationSnackbar\"}},[_vm._v(\" Calibration was updated \")]),_c('div',{staticClass:\"debug-video\"},[(!_vm.isReferenceDevice && _vm.appState.currentFrame)?_c('VideoStream',{attrs:{\"frame\":_vm.appState.currentFrame.frame,\"face\":_vm.appState.face,\"min\":_vm.appState.currentFrame.analysisResult.heatStats.min,\"max\":_vm.appState.currentFrame.analysisResult.heatStats.max,\"crop-box\":_vm.cropBoxPixelBounds,\"crop-enabled\":false,\"draw-overlays\":true,\"show-coords\":true}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"user-state\",class:[\n    _vm.classNameForState,\n    _vm.screeningResultClass,\n    { 'mini-view': !_vm.onReferenceDevice }\n  ],style:({ background: _vm.warmupBackgroundColour }),attrs:{\"id\":\"user-facing-screening\"},on:{\"click\":function($event){_vm.interacted = true}}},[(!_vm.isWarmingUp)?_c('canvas',{ref:\"beziers\",attrs:{\"id\":\"beziers\",\"width\":\"810\",\"height\":\"1080\"}}):_vm._e(),_c('div',{staticClass:\"center\",class:{ 'warming-up': _vm.isWarmingUp }},[(_vm.hasScreeningResult)?_c('div',{staticClass:\"result\"},[_vm._v(\" \"+_vm._s(_vm.temperature)+\" \")]):_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.messageText)}})]),(_vm.onReferenceDevice || _vm.isLocal)?_c('v-card',{staticClass:\"settings-toggle-button\",class:{ interacted: _vm.interacted },attrs:{\"dark\":\"\",\"flat\":\"\",\"height\":\"44\",\"tile\":\"\",\"color\":\"transparent\"}},[_c('v-card-actions',[_c('v-btn',{attrs:{\"absolute\":\"\",\"dark\":\"\",\"fab\":\"\",\"bottom\":\"\",\"right\":\"\",\"elevation\":\"0\",\"color\":\"transparent\"},on:{\"click\":function (e) {\n            if (_vm.interacted) {\n              _vm.showSettings = true;\n              _vm.hasSettings = true;\n            }\n          }}},[_c('v-icon',{attrs:{\"color\":\"rgba(255, 255, 255, 0.5)\",\"large\":\"\"}},[_vm._v(_vm._s(_vm.cogIcon))])],1)],1)],1):_vm._e(),_c('v-dialog',{attrs:{\"hide-overlay\":\"\",\"attach\":\"#user-facing-screening\",\"fullscreen\":\"\",\"transition\":\"dialog-bottom-transition\"},model:{value:(_vm.showSettings),callback:function ($$v) {_vm.showSettings=$$v},expression:\"showSettings\"}},[(_vm.hasSettings)?_c('AdminSettings',{on:{\"closed\":_vm.closedAdminSettings}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { CameraConnectionState, Frame } from \"./camera\";\r\nimport { Face } from \"./face\";\r\nimport { HaarCascade } from \"./haar-cascade\";\r\nimport { ROIFeature } from \"./worker-fns\";\r\nimport { DegreesCelsius } from \"@/utils\";\r\nimport { Span } from \"@/shape-processing\";\r\nimport { Point } from \"@/geom\";\r\n\r\nexport type BoxOffset = \"left\" | \"right\" | \"top\" | \"bottom\";\r\nexport interface CropBox {\r\n  left: number;\r\n  right: number;\r\n  top: number;\r\n  bottom: number;\r\n}\r\nexport interface BoundingBox {\r\n  x0: number;\r\n  x1: number;\r\n  y0: number;\r\n  y1: number;\r\n}\r\n\r\nexport interface TestAppState {\r\n  thermalReference: ROIFeature | null;\r\n  faces: Face[];\r\n  cropBox: CropBox;\r\n}\r\n\r\nexport enum ScreeningState {\r\n  INIT = \"INIT\",\r\n  WARMING_UP = \"WARMING_UP\",\r\n  READY = \"READY\", // no face\r\n  HEAD_LOCK = \"HEAD_LOCK\",\r\n  TOO_FAR = \"TOO_FAR\",\r\n  LARGE_BODY = \"LARGE_BODY\",\r\n  MULTIPLE_HEADS = \"MULTIPLE_HEADS\",\r\n  FACE_LOCK = \"FACE_LOCK\", // has face\r\n  FRONTAL_LOCK = \"FRONTAL_LOCK\", // Face is front-on\r\n  STABLE_LOCK = \"STABLE_LOCK\", // Face has not changed in size or position for a couple of frames.\r\n  LEAVING = \"LEAVING\", // has face, but not front-on\r\n  MISSING_THERMAL_REF = \"MISSING_REF\"\r\n}\r\n\r\n// This describes the state machine of allowed state transitions for the screening event.\r\nexport const ScreeningAcceptanceStates = {\r\n  [ScreeningState.INIT]: [\r\n    ScreeningState.WARMING_UP,\r\n    ScreeningState.READY,\r\n    ScreeningState.MISSING_THERMAL_REF\r\n  ],\r\n  [ScreeningState.WARMING_UP]: [\r\n    ScreeningState.READY,\r\n    ScreeningState.MISSING_THERMAL_REF\r\n  ],\r\n  [ScreeningState.MULTIPLE_HEADS]: [\r\n    ScreeningState.READY,\r\n    ScreeningState.HEAD_LOCK,\r\n    ScreeningState.FACE_LOCK,\r\n    ScreeningState.FRONTAL_LOCK,\r\n    ScreeningState.MISSING_THERMAL_REF\r\n  ],\r\n  [ScreeningState.LARGE_BODY]: [\r\n    ScreeningState.READY,\r\n    ScreeningState.HEAD_LOCK,\r\n    ScreeningState.MULTIPLE_HEADS,\r\n    ScreeningState.FACE_LOCK,\r\n    ScreeningState.FRONTAL_LOCK,\r\n    ScreeningState.TOO_FAR,\r\n    ScreeningState.MISSING_THERMAL_REF\r\n  ],\r\n  [ScreeningState.TOO_FAR]: [\r\n    ScreeningState.READY,\r\n    ScreeningState.HEAD_LOCK,\r\n    ScreeningState.MULTIPLE_HEADS,\r\n    ScreeningState.FACE_LOCK,\r\n    ScreeningState.FRONTAL_LOCK,\r\n    ScreeningState.MISSING_THERMAL_REF\r\n  ],\r\n  [ScreeningState.READY]: [\r\n    ScreeningState.TOO_FAR,\r\n    ScreeningState.LARGE_BODY,\r\n    ScreeningState.HEAD_LOCK,\r\n    ScreeningState.MULTIPLE_HEADS,\r\n    ScreeningState.FACE_LOCK,\r\n    ScreeningState.FRONTAL_LOCK,\r\n    ScreeningState.MISSING_THERMAL_REF\r\n  ],\r\n  [ScreeningState.FACE_LOCK]: [\r\n    ScreeningState.TOO_FAR,\r\n    ScreeningState.LARGE_BODY,\r\n    ScreeningState.HEAD_LOCK,\r\n    ScreeningState.MULTIPLE_HEADS,\r\n    ScreeningState.FRONTAL_LOCK,\r\n    ScreeningState.READY,\r\n    ScreeningState.MISSING_THERMAL_REF\r\n  ],\r\n  [ScreeningState.FRONTAL_LOCK]: [\r\n    ScreeningState.TOO_FAR,\r\n    ScreeningState.LARGE_BODY,\r\n    ScreeningState.STABLE_LOCK,\r\n    ScreeningState.FACE_LOCK,\r\n    ScreeningState.MULTIPLE_HEADS,\r\n    ScreeningState.HEAD_LOCK,\r\n    ScreeningState.READY,\r\n    ScreeningState.MISSING_THERMAL_REF\r\n  ],\r\n  [ScreeningState.HEAD_LOCK]: [\r\n    ScreeningState.TOO_FAR,\r\n    ScreeningState.LARGE_BODY,\r\n    ScreeningState.FACE_LOCK,\r\n    ScreeningState.FRONTAL_LOCK,\r\n    ScreeningState.READY,\r\n    ScreeningState.MULTIPLE_HEADS,\r\n    ScreeningState.MISSING_THERMAL_REF\r\n  ],\r\n  [ScreeningState.STABLE_LOCK]: [ScreeningState.LEAVING],\r\n  [ScreeningState.LEAVING]: [ScreeningState.READY],\r\n  [ScreeningState.MISSING_THERMAL_REF]: [\r\n    ScreeningState.READY,\r\n    ScreeningState.TOO_FAR,\r\n    ScreeningState.LARGE_BODY\r\n  ]\r\n};\r\n\r\nexport interface CalibrationConfig {\r\n  cropBox: CropBox;\r\n  timestamp: Date;\r\n  thermalReferenceRawValue: number;\r\n  hotspotRawTemperatureValue: number;\r\n  calibrationTemperature: DegreesCelsius;\r\n  thermalRefTemperature: DegreesCelsius;\r\n  thresholdMinFever: number;\r\n  // TODO(jon): Custom temperature range.\r\n}\r\n\r\nexport interface Circle {\r\n  center: Point;\r\n  radius: number;\r\n}\r\n\r\nexport interface ThermalReference {\r\n  geom: Circle;\r\n  val: number;\r\n  temp: number;\r\n}\r\n\r\nexport interface ScreeningEvent {\r\n  timestamp: Date;\r\n  rawTemperatureValue: number;\r\n  calculatedValue: number;\r\n  sampleX: number;\r\n  sampleY: number;\r\n  frame: Frame;\r\n  thermalReference: ThermalReference;\r\n  face: FaceInfo;\r\n}\r\n\r\nexport interface FaceInfo {\r\n  halfwayRatio: number;\r\n  headLock: number;\r\n  isValid: boolean;\r\n  samplePoint: Point;\r\n  sampleValue: number;\r\n  sampleTemp: number;\r\n  head: {\r\n    topLeft: Point;\r\n    topRight: Point;\r\n    bottomLeft: Point;\r\n    bottomRight: Point;\r\n  };\r\n}\r\n\r\nexport interface AnalysisResult {\r\n  motionSum: number;\r\n  motionThresholdSum: number;\r\n  thresholdSum: number;\r\n  frameBottomSum: number;\r\n  heatStats: {\r\n    min: number;\r\n    max: number;\r\n    threshold: number;\r\n  };\r\n  face: FaceInfo;\r\n  nextState: ScreeningState;\r\n  hasBody: boolean;\r\n  thermalRef: ThermalReference;\r\n}\r\n\r\nexport interface AppState {\r\n  currentFrame: Frame | null;\r\n  cameraConnectionState: CameraConnectionState;\r\n  face: FaceInfo | null;\r\n  currentCalibration: CalibrationConfig;\r\n  currentScreeningEvent: ScreeningEvent | null;\r\n  currentScreeningState: ScreeningState;\r\n  currentScreeningStateFrameCount: number;\r\n  paused: boolean;\r\n  lastFrameTime: number;\r\n  uuid: number;\r\n  analysisResult: AnalysisResult;\r\n}\r\n\r\nexport type RawShape = Record<number, Span[]>;\r\n\r\nfunction getScreeningState(state: number): ScreeningState {\r\n  let screeningState = ScreeningState.INIT;\r\n  switch (state) {\r\n    case 0:\r\n      screeningState = ScreeningState.WARMING_UP;\r\n      break;\r\n    case 1:\r\n      screeningState = ScreeningState.READY;\r\n      break;\r\n    case 2:\r\n      screeningState = ScreeningState.HEAD_LOCK;\r\n      break;\r\n    case 3:\r\n      screeningState = ScreeningState.TOO_FAR;\r\n      break;\r\n    case 4:\r\n      screeningState = ScreeningState.LARGE_BODY;\r\n      break;\r\n    case 5:\r\n      screeningState = ScreeningState.FACE_LOCK;\r\n      break;\r\n    case 6:\r\n      screeningState = ScreeningState.FRONTAL_LOCK;\r\n      break;\r\n    case 7:\r\n      screeningState = ScreeningState.STABLE_LOCK;\r\n      break;\r\n    case 8:\r\n      screeningState = ScreeningState.LEAVING;\r\n      break;\r\n    case 9:\r\n      screeningState = ScreeningState.MISSING_THERMAL_REF;\r\n      break;\r\n  }\r\n  return screeningState;\r\n}\r\n\r\n\r\nexport function extractResult(analysisResult: any) {\r\n  const f = analysisResult.face;\r\n  const h = f.head;\r\n  const tL = h.top_left;\r\n  const tR = h.top_right;\r\n  const bL = h.bottom_left;\r\n  const bR = h.bottom_right;\r\n  const sP = f.sample_point;\r\n  const hS = analysisResult.heat_stats;\r\n  const ref = analysisResult.thermal_ref;\r\n  const geom = ref.geom;\r\n  const cP = geom.center;\r\n  const copiedAnalysisResult: AnalysisResult = {\r\n    face: {\r\n      headLock: f.head_lock,\r\n      head: {\r\n        topLeft: {\r\n          x: tL.x,\r\n          y: tL.y\r\n        },\r\n        topRight: {\r\n          x: tR.x,\r\n          y: tR.y\r\n        },\r\n        bottomLeft: {\r\n          x: bL.x,\r\n          y: bL.y\r\n        },\r\n        bottomRight: {\r\n          x: bR.x,\r\n          y: bR.y\r\n        }\r\n      },\r\n      samplePoint: {\r\n        x: sP.x,\r\n        y: sP.y\r\n      },\r\n      sampleTemp: f.sample_temp,\r\n      sampleValue: f.sample_value,\r\n      halfwayRatio: f.halfway_ratio,\r\n      isValid: f.is_valid\r\n    },\r\n    frameBottomSum: analysisResult.frame_bottom_sum,\r\n    motionSum: analysisResult.motion_sum,\r\n    heatStats: {\r\n      threshold: hS.threshold,\r\n      min: hS.min,\r\n      max: hS.max\r\n    },\r\n    motionThresholdSum: analysisResult.motion_threshold_sum,\r\n    thresholdSum: analysisResult.threshold_sum,\r\n    nextState: getScreeningState(analysisResult.next_state),\r\n    hasBody: analysisResult.has_body,\r\n    thermalRef: {\r\n      geom: {\r\n        center: {\r\n          x: cP.x,\r\n          y: cP.y\r\n        },\r\n        radius: geom.radius\r\n      },\r\n      val: ref.val,\r\n      temp: ref.temp\r\n    }\r\n  };\r\n\r\n  f.free();\r\n  h.free();\r\n  tL.free();\r\n  tR.free();\r\n  bL.free();\r\n  bR.free();\r\n  sP.free();\r\n  hS.free();\r\n  cP.free();\r\n  geom.free();\r\n  ref.free();\r\n  analysisResult.free();\r\n  return copiedAnalysisResult;\r\n}\r\n","export const BlobReader = (function(): {\r\n  arrayBuffer: (blob: Blob) => Promise<ArrayBuffer>;\r\n} {\r\n  // For comparability with older browsers/iOS that don't yet support arrayBuffer()\r\n  // directly off the blob object\r\n  const arrayBuffer: (blob: Blob) => Promise<ArrayBuffer> =\r\n    \"arrayBuffer\" in Blob.prototype &&\r\n    typeof (Blob.prototype as Blob)[\"arrayBuffer\"] === \"function\"\r\n      ? (blob: Blob) => blob[\"arrayBuffer\"]()\r\n      : (blob: Blob) =>\r\n          new Promise((resolve, reject) => {\r\n            const fileReader = new FileReader();\r\n            fileReader.addEventListener(\"load\", () => {\r\n              resolve(fileReader.result as ArrayBuffer);\r\n            });\r\n            fileReader.addEventListener(\"error\", () => {\r\n              reject();\r\n            });\r\n            fileReader.readAsArrayBuffer(blob);\r\n          });\r\n\r\n  return {\r\n    arrayBuffer\r\n  };\r\n})();\r\n\r\nexport class DegreesCelsius {\r\n  public val: number;\r\n  constructor(val: number) {\r\n    this.val = val;\r\n  }\r\n  public toString(): string {\r\n    if (this.val === undefined) {\r\n      debugger;\r\n    }\r\n    return `${this.val.toFixed(1)}°`;\r\n  }\r\n}\r\n\r\nexport const getHistogram = (\r\n  data: Uint16Array,\r\n  numBuckets: number\r\n): { histogram: Uint16Array; min: number; max: number } => {\r\n  // Find find the total range of the data\r\n  let max = 0;\r\n  let min = Number.MAX_SAFE_INTEGER;\r\n  for (let i = 0; i < data.length; i++) {\r\n    const u16Val = data[i];\r\n    if (u16Val < min) {\r\n      min = u16Val;\r\n    }\r\n    if (u16Val > max) {\r\n      max = u16Val;\r\n    }\r\n  }\r\n\r\n  // A histogram with 16 buckets seems sufficiently coarse for this\r\n  // The histogram is usually bi-modal, so we want to find the trough between the two peaks as our threshold value\r\n  const histogram = new Uint16Array(numBuckets);\r\n  for (let i = 0; i < data.length; i++) {\r\n    // If within a few degrees of constant heat-source white else black.\r\n    const v = ((data[i] - min) / (max - min)) * numBuckets;\r\n    histogram[Math.floor(v)] += 1;\r\n  }\r\n  return {\r\n    histogram,\r\n    min,\r\n    max\r\n  };\r\n};\r\n\r\nexport const getAdaptiveThreshold = (data: Uint16Array): number => {\r\n  const { histogram, min, max } = getHistogram(data, 16);\r\n  let peak0Max = 0;\r\n  let peak1Max = 0;\r\n  let peak0Index = 0;\r\n  let peak1Index = 0;\r\n  // First, find the peak value, which is usually in the background temperature range.\r\n  for (let i = 0; i < histogram.length; i++) {\r\n    if (histogram[i] > peak0Max) {\r\n      peak0Max = histogram[i];\r\n      peak0Index = i;\r\n    }\r\n  }\r\n\r\n  // Need to look for a valley in between the two bimodal peaks, so\r\n  // keep descending from the first peak till we find a local minimum.\r\n  let prevIndex = peak0Index;\r\n  let index = peak0Index + 1;\r\n  while (histogram[index] < histogram[prevIndex]) {\r\n    prevIndex++;\r\n    index++;\r\n  }\r\n  // Now climb up from that valley to find the second peak.\r\n  for (let i = prevIndex; i < histogram.length; i++) {\r\n    if (histogram[i] > peak1Max) {\r\n      peak1Max = histogram[i];\r\n      peak1Index = i;\r\n    }\r\n  }\r\n\r\n  // Find the lowest point between the two peaks.\r\n  let valleyMin = peak1Max;\r\n  let valleyIndex = 0;\r\n  for (let i = peak0Index + 1; i < peak1Index; i++) {\r\n    if (histogram[i] < valleyMin) {\r\n      valleyMin = histogram[i];\r\n      valleyIndex = i;\r\n    }\r\n  }\r\n  const range = max - min;\r\n  return min + (range / histogram.length) * valleyIndex + 1;\r\n};\r\n\r\nexport const temperatureForSensorValue = (\r\n  savedThermalRefValue: number,\r\n  rawValue: number,\r\n  currentThermalRefValue: number\r\n): DegreesCelsius => {\r\n  return new DegreesCelsius(\r\n    savedThermalRefValue + (rawValue - currentThermalRefValue) * 0.01\r\n  );\r\n};\r\nexport const ZeroCelsiusInKelvin = 273.15;\r\nexport const mKToCelsius: (val: number) => DegreesCelsius = (mkVal: number) =>\r\n  new DegreesCelsius(mkVal * 0.01 - ZeroCelsiusInKelvin);\r\n\r\nexport function saveCurrentVersion(binaryVersion: string, appVersion: string) {\r\n  window.localStorage.setItem(\r\n    \"softwareVersion\",\r\n    JSON.stringify({\r\n      appVersion,\r\n      binaryVersion\r\n    })\r\n  );\r\n}\r\n\r\nexport function checkForSoftwareUpdates(\r\n  binaryVersion: string,\r\n  appVersion: string,\r\n  shouldReloadIfChanged = true\r\n): boolean {\r\n  const prevVersionJSON = window.localStorage.getItem(\"softwareVersion\");\r\n  if (prevVersionJSON) {\r\n    try {\r\n      const prevVersion = JSON.parse(prevVersionJSON);\r\n      if (\r\n        prevVersion.binaryVersion != binaryVersion ||\r\n        prevVersion.appVersion != appVersion\r\n      ) {\r\n        if (shouldReloadIfChanged) {\r\n          /*\r\n          console.log(\r\n            \"reload because version changed\",\r\n            JSON.stringify(prevVersion),\r\n            binaryVersion,\r\n            appVersion\r\n          );\r\n          window.location.reload();\r\n\r\n           */\r\n        } else {\r\n          saveCurrentVersion(binaryVersion, appVersion);\r\n          // Display info that the software has updated since last started up.\r\n          return true;\r\n        }\r\n      }\r\n    } catch (e) {\r\n      saveCurrentVersion(binaryVersion, appVersion);\r\n      return false;\r\n    }\r\n  } else {\r\n    saveCurrentVersion(binaryVersion, appVersion);\r\n  }\r\n  return false;\r\n}\r\n","export interface Span {\n  x0: number;\n  x1: number;\n  y: number;\n}\nexport interface Rect {\n  x0: number;\n  x1: number;\n  y0: number;\n  y1: number;\n}\n\nexport interface Point {\n  x: number;\n  y: number;\n}\n\nexport interface Vec2 {\n  x: number;\n  y: number;\n}\nconst WIDTH = 120;\nconst HEIGHT = 160;\nexport type Shape = Span[];\nexport type ImmutableShape = readonly Span[];\n\nconst pointIsLeftOfLine = (l0: Point, l1: Point, p: Point): boolean =>\n  // Use cross-product to determine which side of a line a point is on.\n  (l1.x - l0.x) * (p.y - l0.y) - (l1.y - l0.y) * (p.x - l0.x) > 0;\n\nfunction isNotCeilingHeat(shape: Shape): boolean {\n  return !(shape[0].y === 0 && shape.length < 80);\n}\n\nfunction magnitude(vec: Vec2): number {\n  return Math.sqrt(vec.x * vec.x + vec.y * vec.y);\n}\n\nfunction normalise(vec: Vec2): Vec2 {\n  const len = magnitude(vec);\n  return {\n    x: vec.x / len,\n    y: vec.y / len\n  };\n}\n\nfunction scale(vec: Vec2, scale: number): Vec2 {\n  return {\n    x: vec.x * scale,\n    y: vec.y * scale\n  };\n}\n\nfunction perp(vec: Vec2): Vec2 {\n  // noinspection JSSuspiciousNameCombination\n  return {\n    x: vec.y,\n    y: -vec.x\n  };\n}\n\nfunction add(a: Vec2, b: Vec2): Vec2 {\n  return {\n    x: a.x + b.x,\n    y: a.y + b.y\n  };\n}\n\nfunction sub(a: Vec2, b: Vec2): Vec2 {\n  return {\n    x: a.x - b.x,\n    y: a.y - b.y\n  };\n}\n\nconst spanWidth = (span: Span): number => span.x1 - span.x0;\n\nfunction shapeArea(shape: Shape): number {\n  return shape.reduce((acc, span) => acc + spanWidth(span), 0);\n}\n\nfunction largestShape(shapes: Shape[]): Shape {\n  return shapes.reduce((prevBestShape: Shape, shape: Shape) => {\n    const best = shapeArea(prevBestShape);\n    const area = shapeArea(shape);\n    return area > best ? shape : prevBestShape;\n  }, []);\n}\n\nfunction boundsForShape(shape: Shape): Rect {\n  const y0 = shape[0].y;\n  const y1 = shape[shape.length - 1].y;\n  const x0 = Math.min(...shape.map(({ x0 }) => x0));\n  const x1 = Math.max(...shape.map(({ x1 }) => x1));\n  return { x0, x1, y0, y1 };\n}\n\nconst startP = ({ x0, y }: Span): Point => ({ x: x0, y });\nconst endP = ({ x1, y }: Span): Point => ({ x: x1, y });\nconst distance = (a: Point, b: Point): number => {\n  const dX = a.x - b.x;\n  const dY = a.y - b.y;\n  return Math.sqrt(dX * dX + dY * dY);\n};\n\nfunction widestSpan(shape: Span[]): Span {\n  let maxWidthSpan = shape[0];\n  for (const span of shape) {\n    if (spanWidth(span) > spanWidth(maxWidthSpan)) {\n      maxWidthSpan = span;\n    }\n  }\n  return maxWidthSpan;\n}\n\nfunction narrowestSpan(shape: Shape): Span {\n  let minWidthSpan;\n  minWidthSpan = shape.find(x => x.x0 !== 0 && x.x1 !== WIDTH - 1);\n  if (!minWidthSpan) {\n    minWidthSpan = shape[0];\n  }\n  // TODO(jon): Ideally the narrowest span doesn't hit the frame edges.\n  for (const span of shape) {\n    if (spanWidth(span) <= spanWidth(minWidthSpan)) {\n      if (span.x0 !== 0 && span.x1 !== WIDTH - 1) {\n        minWidthSpan = span;\n      }\n    }\n  }\n  return minWidthSpan;\n}\n\nfunction narrowestSlanted(shape: Shape, start: Span): [Span, Span] {\n  const nIndex = shape.indexOf(start);\n  // From the narrowest, wiggle about on each side to try to find a shorter distance between spans.\n  const startIndex = Math.max(0, nIndex - 10);\n  const endIndex = Math.min(shape.length - 1, nIndex + 10);\n  const distances = [];\n  for (let i = startIndex; i < endIndex; i++) {\n    for (let j = startIndex; j < endIndex; j++) {\n      if (i !== j) {\n        const d = distance(startP(shape[i]), endP(shape[j]));\n        distances.push({\n          d,\n          skew: Math.abs(shape[i].y - shape[j].y),\n          left: shape[i],\n          right: shape[j]\n        });\n      }\n    }\n  }\n  // If there are a bunch that are similar, prefer the least slanted one.\n  distances.sort((a, b) => {\n    // NOTE(defer spans where x0 or x1 is on the edge of the frame.\n    if (a.left.x0 === 0 || a.right.x1 === WIDTH - 1) {\n      return 1;\n    } else if (b.left.x0 === 0 || b.right.x1 === WIDTH - 1) {\n      return -1;\n    }\n\n    if (a.d < b.d) {\n      return -1;\n    } else if (a.d > b.d) {\n      return 1;\n    } else {\n      // Give greatest skew first, then prefer highest y sum?\n      if (a.skew < b.skew) {\n        return -1;\n      } else if (a.skew > a.skew) {\n        return 1;\n      } else {\n        return b.right.y + b.left.y - (a.right.y + a.left.y);\n      }\n    }\n  });\n  const { left, right } = distances[0];\n  return [left, right];\n}\n\nfunction narrowestSpans(shape: Shape): [Span, Span] {\n  const narrowest = narrowestSpan(shape.slice(10));\n  return narrowestSlanted(shape, narrowest);\n}\n\nexport function drawShapes(shapes: Shape[], canvas: HTMLCanvasElement): any {\n  const ctx = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\n  const width = canvas.width;\n  const height = canvas.height;\n  ctx.clearRect(0, 0, width, height);\n  const img = ctx.getImageData(0, 0, width, height);\n  const data = new Uint32Array(img.data.buffer);\n  const colours = [\n    0x33ffff00,\n    0x33ff00ff,\n    0x3300ffff,\n    0x33ffff00,\n    0x3300ffff,\n    0x33ff00ff,\n    0xffff66ff,\n    0xff6633ff,\n    0xff0000ff\n  ];\n  const faceInfo = {};\n  const shape = largestShape(shapes);\n  {\n    const widest = widestSpan(shape.slice(Math.round((shape.length / 3) * 2)));\n    const widestIndex = shape.indexOf(widest);\n    const widestWidth = spanWidth(widest);\n    let halfWidth;\n    // Work from bottom and find first span that is past widest point, and is around 1/2 of the width.\n    for (let i = widestIndex; i > 10; i--) {\n      const span = shape[i];\n      if (widestWidth / 2 > spanWidth(span)) {\n        halfWidth = span;\n        break;\n      }\n    }\n    let left, right;\n    if (halfWidth) {\n      [left, right] = narrowestSlanted(shape.slice(10), halfWidth);\n    } else {\n      [left, right] = narrowestSpans(shape.slice(10));\n    }\n\n    const vec = { x: right.x1 - left.x0, y: right.y - left.y };\n    const start = { x: left.x0, y: left.y };\n    const halfway = scale(vec, 0.5);\n    const perpV = scale(perp(vec), 3);\n    const neckBaseMiddleP = add(start, halfway);\n    const l1 = add(neckBaseMiddleP, perpV);\n\n    {\n      // TODO(jon): Categorise the head pixels as on the left or right side of the \"center line\"\n      //  Sum up the pixels on each side, but also look for symmetry in terms of how far each edge is\n      //  from the center line.  Ignore the portion above the eyes for this.  The eyes can be inferred\n      //  as being half-way up the face.  We can do some more thresholding on the actual pixels there\n      //  to try and identify eyes/glasses.\n      const colour = colours[0 % colours.length];\n      for (const span of shape) {\n        let i = span.x0;\n        if (span.x0 >= span.x1) {\n          console.warn(\"Weird spans\", span.x0, span.x1);\n          continue;\n        }\n        do {\n          const p = { x: i, y: span.y };\n          if (\n            !pointIsLeftOfLine(\n              { x: left.x0, y: left.y },\n              { x: right.x1, y: right.y },\n              p\n            )\n          ) {\n            if (pointIsLeftOfLine(neckBaseMiddleP, l1, p)) {\n              //data[span.y * width + i] = 0xffff0000;\n            } else {\n              //data[span.y * width + i] = 0xffff00ff;\n            }\n            data[span.y * width + i] = 0x66666666;\n          }\n          // else if (span.h === 0) {\n          //   data[span.y * width + i] = colour;\n          // } else if (span.h === 3) {\n          //   data[span.y * width + i] =\n          //     (255 << 24) | (200 << 16) | (200 << 8) | 0;\n          // } else if (span.h === 4) {\n          //   data[span.y * width + i] =\n          //     (255 << 24) | (200 << 16) | (200 << 8) | 255;\n          // } else if (span.h === 8) {\n          //   data[span.y * width + i] =\n          //     (255 << 24) | (100 << 16) | (100 << 8) | 255;\n          // } else if (span.h === 1) {\n          //   data[span.y * width + i] = (255 << 24) | (0 << 16) | (0 << 8) | 200;\n          // } else if (span.h === 2) {\n          //   data[span.y * width + i] = (255 << 24) | (0 << 16) | (200 << 8) | 0;\n          // }\n          i++;\n        } while (i < span.x1);\n      }\n      ctx.putImageData(img, 0, 0);\n    }\n\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = \"red\";\n    ctx.beginPath();\n    ctx.moveTo(left.x0, left.y);\n    ctx.lineTo(right.x1, right.y);\n    ctx.stroke();\n\n    //ctx.moveTo(halfwayP.x - 2, halfwayP.y - 2);\n    // ctx.fillStyle = 'yellow';\n    // ctx.fillRect(l0.x - 1, l0.y - 1, 2, 2);\n\n    // TODO(jon): March down this line with a perp vector, and stop when we don't hit any pixels on either side.\n    //  Then go halfway-down the line created by this joining line, and march out to either side to get the width\n    //  of the middle of the face.  Now we should be able to get the forehead box, which we'll only use if\n    //  we think the face is front-on.\n    const normMidline = normalise(sub(l1, neckBaseMiddleP));\n    // TODO(jon): Discard boxes that are too long/wide ratio-wise.\n\n    const perpLeft = normalise(perp(normMidline));\n    const perpRight = normalise(perp(perp(perp(normMidline))));\n\n    const startY = shape[0].y;\n    // Keep going until there are no spans to the left or right, so ray-march left and then right.\n    let scaleFactor = 0;\n    let heightProbeP = neckBaseMiddleP;\n    ctx.fillStyle = \"rgba(255, 255, 255, 0.5)\";\n\n    let maxLeftScale = 0;\n    let maxRightScale = 0;\n    const maxHeightScale = magnitude({ x: WIDTH, y: HEIGHT });\n    const leftSymmetry = [];\n    const rightSymmetry = [];\n    const symmetry = [];\n\n    while (scaleFactor < maxHeightScale) {\n      const scaled = scale(normMidline, scaleFactor);\n      heightProbeP = add(neckBaseMiddleP, scaled);\n      let foundLeft = false;\n      let foundRight = false;\n\n      for (let incLeft = 1; incLeft < 50; incLeft++) {\n        const probeP = add(heightProbeP, scale(perpLeft, incLeft));\n        const xInBounds = probeP.x >= 0 && probeP.x < WIDTH;\n        const probeY = Math.round(probeP.y);\n        const shapeIndex = probeY - startY;\n        // ctx.fillRect(probeP.x - 0.5, probeP.y - 0.5, 1, 1);\n        if (shapeIndex < 0 || shapeIndex > shape.length - 1) {\n          break;\n        }\n\n        if (xInBounds && shape[shapeIndex]) {\n          if (\n            shape[shapeIndex].x0 < probeP.x &&\n            shape[shapeIndex].x1 > probeP.x\n          ) {\n            //\n            foundLeft = true;\n            maxLeftScale = Math.max(incLeft, maxLeftScale);\n          }\n          if (shape[shapeIndex].x0 > probeP.x) {\n            break;\n          }\n        }\n      }\n      for (let incRight = 1; incRight < 50; incRight++) {\n        const probeP = add(heightProbeP, scale(perpRight, incRight));\n        const xInBounds = probeP.x >= 0 && probeP.x < WIDTH;\n        const probeY = Math.round(probeP.y);\n        const shapeIndex = probeY - startY;\n        // ctx.fillRect(probeP.x - 0.5, probeP.y - 0.5, 1, 1);\n\n        if (shapeIndex < 0 || shapeIndex > shape.length - 1) {\n          break;\n        }\n        if (xInBounds && shape[shapeIndex]) {\n          if (\n            shape[shapeIndex].x1 > probeP.x &&\n            shape[shapeIndex].x0 < probeP.x\n          ) {\n            //\n            foundRight = true;\n            maxRightScale = Math.max(incRight, maxRightScale);\n          }\n          if (shape[shapeIndex].x1 < probeP.x) {\n            break;\n          }\n        }\n      }\n      leftSymmetry.push(maxLeftScale);\n      rightSymmetry.push(maxRightScale);\n      symmetry.push(Math.abs(maxLeftScale - maxRightScale));\n      if (!(foundLeft || foundRight)) {\n        break;\n      }\n      scaleFactor += 1;\n    }\n\n    const ssym = [];\n    // Divide left and right symmetry by maxLeftScale, maxRightScale;\n    for (let i = 0; i < scaleFactor; i++) {\n      ssym.push(\n        Math.abs(\n          leftSymmetry[i] / maxLeftScale - rightSymmetry[i] / maxRightScale\n        )\n      );\n    }\n\n    // TODO(jon): Detect \"fringe\" cases where there's not enough forehead.\n    if (heightProbeP) {\n      ctx.lineWidth = 1;\n      ctx.strokeStyle = \"orange\";\n      ctx.moveTo(neckBaseMiddleP.x, neckBaseMiddleP.y);\n      ctx.lineTo(heightProbeP.x, heightProbeP.y);\n      ctx.stroke();\n\n      const bottomLeftP = add(neckBaseMiddleP, scale(perpLeft, maxLeftScale));\n      const bottomRightP = add(\n        neckBaseMiddleP,\n        scale(perpRight, maxRightScale)\n      );\n      const topLeftP = add(heightProbeP, scale(perpLeft, maxLeftScale));\n      const topRightP = add(heightProbeP, scale(perpRight, maxRightScale));\n\n      const headWidth = magnitude(sub(bottomLeftP, bottomRightP));\n      const headHeight = magnitude(sub(topLeftP, bottomLeftP));\n      const widthHeightRatio = headWidth / headHeight;\n      const isValidHead = headHeight > headWidth && widthHeightRatio > 0.5;\n\n      // TODO(jon): remove too small head areas.\n\n      if (isValidHead) {\n        // We only care about symmetry of the below forehead portion of the face, since above the eyes\n        //  symmetry can be affected by hair parting to one side etc.\n        const symmetryScore = ssym\n          .slice(0, Math.floor(symmetry.length / 2))\n          .reduce((a, x) => a + x, 0);\n        const areaLeft = leftSymmetry\n          .slice(0, Math.floor(leftSymmetry.length / 2))\n          .reduce((a, x) => a + x, 0);\n        const areaRight = rightSymmetry\n          .slice(0, Math.floor(rightSymmetry.length / 2))\n          .reduce((a, x) => a + x, 0);\n        // Use maxLeftScale and maxRightScale to get the face side edges.\n        //console.log('area left, right', areaLeft, areaRight);\n        //console.log('head width, height, ratio', headWidth, headHeight, headWidth / headHeight);\n        console.log(\"symmetry score\", symmetryScore);\n        //console.log(ssym.slice(0, Math.floor(symmetry.length / 2)));\n        //console.log(symmetry.slice(0, Math.floor(symmetry.length / 2)));\n        const areaDiff = Math.abs(areaLeft - areaRight);\n\n        console.log(\"areaDiff\", areaDiff);\n\n        if (symmetryScore < 2 && areaDiff < 50) {\n          ctx.strokeStyle = \"red\";\n        } else if (areaDiff >= 50) {\n          ctx.strokeStyle = \"blue\";\n        } else {\n          ctx.strokeStyle = \"rgba(255, 255, 255, 0.6)\";\n        }\n\n        ctx.lineWidth = 1;\n        ctx.beginPath();\n        ctx.moveTo(topLeftP.x, topLeftP.y);\n        ctx.lineTo(topRightP.x, topRightP.y);\n        ctx.lineTo(bottomRightP.x, bottomRightP.y);\n        ctx.lineTo(bottomLeftP.x, bottomLeftP.y);\n        ctx.lineTo(topLeftP.x, topLeftP.y);\n        ctx.stroke();\n\n        // TODO(jon): Could also find center of mass in bottom part of the face, and compare with actual center.\n\n        // Draw midline, draw forehead, colour forehead pixels.\n        const midP = add(\n          neckBaseMiddleP,\n          scale(normMidline, scaleFactor * 0.5)\n        );\n        const midLeftP = add(midP, scale(perpLeft, maxLeftScale));\n        const midRightP = add(midP, scale(perpRight, maxRightScale));\n\n        ctx.moveTo(midLeftP.x, midLeftP.y);\n        ctx.lineTo(midRightP.x, midRightP.y);\n        ctx.stroke();\n\n        const foreheadTopP = add(\n          neckBaseMiddleP,\n          scale(normMidline, scaleFactor * 0.8)\n        );\n        const foreheadTopLeftP = add(\n          foreheadTopP,\n          scale(perpLeft, maxLeftScale)\n        );\n        const foreheadTopRightP = add(\n          foreheadTopP,\n          scale(perpRight, maxRightScale)\n        );\n\n        ctx.beginPath();\n        ctx.moveTo(foreheadTopLeftP.x, foreheadTopLeftP.y);\n        ctx.lineTo(foreheadTopRightP.x, foreheadTopRightP.y);\n        ctx.stroke();\n        ctx.beginPath();\n        ctx.arc(foreheadTopP.x, foreheadTopP.y, 5, 0, Math.PI * 2);\n        ctx.stroke();\n        ctx.beginPath();\n      }\n    }\n    // TODO(jon): Draw a line perpendicular to this line.\n    // Then we can find the top of the head, and then the widest part of the head.\n    // Then we can draw an oval.\n    // The angle of the neck also helps us know if the head is front-on.\n\n    // If the face is front-on, the width of the neck is roughly a third the width of shoulders, if visible.\n\n    // TODO(jon): Separate case for animated outlines where we paint in irregularities in the head.\n  }\n  return faceInfo;\n}\n\nexport function areEqual(a: Span, b: Span): boolean {\n  return a.x0 === b.x0 && a.x1 === b.x1 && a.y === b.y;\n}\nexport const LerpAmount = { amount: 0 };\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',[_c('v-toolbar',{attrs:{\"color\":\"light-blue\",\"dark\":\"\"},scopedSlots:_vm._u([{key:\"extension\",fn:function(){return [_c('v-tabs',{attrs:{\"centered\":\"\"},model:{value:(_vm.tab),callback:function ($$v) {_vm.tab=$$v},expression:\"tab\"}},_vm._l((_vm.tabItems),function(item){return _c('v-tab',{key:item.tab},[_vm._v(_vm._s(item.tab))])}),1)]},proxy:true}])},[_c('v-toolbar-title',[_vm._v(\"Settings\")]),_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":_vm.close}},[_vm._v(\" close \")])],1),_c('v-tabs-items',{attrs:{\"touchless\":\"\"},model:{value:(_vm.tab),callback:function ($$v) {_vm.tab=$$v},expression:\"tab\"}},_vm._l((_vm.tabItems),function(item){return _c('v-tab-item',{key:item.tab},[_c(item.content,{tag:\"component\"})],1)}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{attrs:{\"height\":\"calc(100vh - 112px)\"}},[_c('v-container',{staticClass:\"cont\"},[_c('v-card',{staticClass:\"split\",attrs:{\"flat\":\"\"}},[_c('v-card',[_c('VideoStream',{attrs:{\"frame\":_vm.state.currentFrame.frame,\"face\":_vm.state.face,\"crop-box\":_vm.editedCropBox,\"min\":_vm.state.currentFrame.analysisResult.heatStats.min,\"max\":_vm.state.currentFrame.analysisResult.heatStats.max,\"crop-enabled\":true},on:{\"crop-changed\":_vm.onCropChanged}})],1),_c('v-card',{staticClass:\"settings\",attrs:{\"width\":\"700\"}},[_c('v-card-title',[_vm._v(\" Calibration: \"+_vm._s(_vm.pendingCalibration)+\" \"),_c('v-btn',{attrs:{\"text\":\"\",\"disabled\":!_vm.canCalibrate},on:{\"click\":function($event){$event.stopPropagation();return (function () { return _vm.editCalibration(); })($event)}}},[_c('v-icon',{attrs:{\"color\":\"#999\",\"small\":\"\"}},[_vm._v(_vm._s(_vm.pencilIcon))]),_vm._v(\" Edit \")],1)],1),_c('v-dialog',{attrs:{\"max-width\":\"400\"},model:{value:(_vm.showCalibrationDialog),callback:function ($$v) {_vm.showCalibrationDialog=$$v},expression:\"showCalibrationDialog\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Edit calibration\")]),_c('v-container',[(_vm.snapshotScreeningEvent)?_c('VideoStream',{attrs:{\"frame\":_vm.snapshotScreeningEvent.frame.frame,\"face\":_vm.snapshotScreeningEvent.face,\"min\":_vm.state.currentFrame.analysisResult.heatStats.min,\"max\":_vm.state.currentFrame.analysisResult.heatStats.max,\"crop-box\":_vm.state.currentCalibration.cropBox,\"crop-enabled\":false,\"draw-overlays\":true,\"scale\":0.6}}):_vm._e()],1),_c('v-card-subtitle',[_vm._v(\" Take your temperature and enter it here to calibrate the system against the current screening event. \")]),_c('v-card-text',[_c('v-text-field',{attrs:{\"label\":\"calibrated temperature\",\"value\":_vm.editedCalibration},on:{\"blur\":_vm.updateCalibration}}),_c('v-card-actions',[_c('v-btn',{on:{\"click\":function () { return _vm.incrementCalibration(0.1); }}},[_c('v-icon',{attrs:{\"light\":\"\"}},[_vm._v(_vm._s(_vm.plusIcon))])],1),_c('v-spacer'),_c('v-btn',{on:{\"click\":function () { return _vm.incrementCalibration(-0.1); }}},[_c('v-icon',{attrs:{\"light\":\"\"}},[_vm._v(_vm._s(_vm.minusIcon))])],1)],1)],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\",\"color\":\"grey darken-1\"},on:{\"click\":function($event){_vm.showCalibrationDialog = false}}},[_vm._v(\" Cancel \")]),_c('v-btn',{attrs:{\"text\":\"\",\"color\":\"green darken-1\"},on:{\"click\":function (e) { return _vm.acceptCalibration(); }}},[_vm._v(\" Accept \")])],1)],1)],1),_c('v-card-text',[_c('v-checkbox',{attrs:{\"label\":\"Use custom alert threshold\"},on:{\"change\":_vm.toggleCustomTemperatureThresholds},model:{value:(_vm.useCustomTemperatureRange),callback:function ($$v) {_vm.useCustomTemperatureRange=$$v},expression:\"useCustomTemperatureRange\"}}),_c('v-card-text',[_c('v-slider',{attrs:{\"disabled\":!_vm.useCustomTemperatureRange,\"min\":\"30\",\"max\":\"40\",\"step\":\"0.1\",\"thumb-label\":\"\",\"ticks\":true,\"color\":'green',\"track-color\":'rgba(255, 0, 0, 0.25)'},model:{value:(_vm.editedTemperatureThreshold),callback:function ($$v) {_vm.editedTemperatureThreshold=$$v},expression:\"editedTemperatureThreshold\"}}),_c('span',{staticClass:\"selected-temp-range\",domProps:{\"innerHTML\":_vm._s(_vm.selectedTemperatureRange)}})],1)],1),_c('v-card-title',[_vm._v(\"Sounds:\")]),_c('v-container',{attrs:{\"fluid\":\"\",\"width\":\"100%\"}},[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"4\"}},[_c('v-switch',{attrs:{\"label\":\"Play normal sound\"},on:{\"change\":function (e) { return _vm.saveSounds(); }},model:{value:(_vm.playNormalSound),callback:function ($$v) {_vm.playNormalSound=$$v},expression:\"playNormalSound\"}})],1),_c('v-col',{attrs:{\"cols\":\"4\"}},[_c('v-switch',{attrs:{\"label\":\"Play warning sound\"},on:{\"change\":function (e) { return _vm.saveSounds(); }},model:{value:(_vm.playWarningSound),callback:function ($$v) {_vm.playWarningSound=$$v},expression:\"playWarningSound\"}})],1),_c('v-col',{attrs:{\"cols\":\"4\"}},[_c('v-switch',{attrs:{\"label\":\"Play error sound\"},on:{\"change\":function (e) { return _vm.saveSounds(); }},model:{value:(_vm.playErrorSound),callback:function ($$v) {_vm.playErrorSound=$$v},expression:\"playErrorSound\"}})],1)],1)],1)],1)],1),_c('v-overlay',{attrs:{\"value\":_vm.saving,\"light\":\"\"}},[_vm._v(\" Saving settings \")]),_c('v-card-actions',{staticClass:\"bottom-nav\"},[_c('v-btn',{attrs:{\"text\":\"\",\"disabled\":!_vm.hasMadeEdits},on:{\"click\":function (e) { return _vm.resetEdits(); }}},[_vm._v(\" Discard changes \")]),_c('v-btn',{attrs:{\"text\":\"\",\"disabled\":!_vm.hasMadeEdits},on:{\"click\":function (e) { return _vm.saveEdits(); }}},[_vm._v(\" Save changes \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"container\",class:{ recording: _vm.recording },attrs:{\"id\":\"video-stream-container\"}},[_c('canvas',{ref:\"cameraStream\",attrs:{\"id\":\"camera-stream\",\"width\":\"160\",\"height\":\"120\"}}),_c('canvas',{ref:\"vizOverlay\",attrs:{\"id\":\"debug-overlay\",\"width\":\"480\",\"height\":\"640\"}}),(_vm.canEditCropping && _vm.cropEnabled)?_c('video-crop-controls',{attrs:{\"crop-box\":_vm.cropBox},on:{\"crop-changed\":_vm.gotCropChange}}):_vm._e(),(_vm.cropEnabled)?_c('v-btn',{class:{ on: _vm.canEditCropping },attrs:{\"text\":\"\",\"title\":\"Edit cropping\",\"id\":\"toggle-cropping\",\"dark\":\"\"},on:{\"click\":_vm.toggleCropping}},[_c('v-icon',[_vm._v(_vm._s(_vm.cropIcon))])],1):_vm._e(),(_vm.showCoords)?_c('p',{staticClass:\"coords\"},[_vm._v(\"(\"+_vm._s(_vm.coords.x)+\", \"+_vm._s(_vm.coords.y)+\")\")]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"box\",attrs:{\"id\":\"fov-box\"}},[_c('div',[_c('div',{ref:\"top\",staticClass:\"fov-handle\",attrs:{\"id\":\"top-handle\"},on:{\"mousedown\":function (e) { return _vm.startDrag(e); },\"mouseup\":function (e) { return _vm.endDrag(e); },\"touchstart\":function (e) { return _vm.startDrag(e); },\"touchend\":function (e) { return _vm.endDrag(e); }}},[_c('svg',{attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 256 512\"}},[_c('path',{attrs:{\"fill\":\"currentColor\",\"d\":\"M214.059 377.941H168V134.059h46.059c21.382 0 32.09-25.851 16.971-40.971L144.971 7.029c-9.373-9.373-24.568-9.373-33.941 0L24.971 93.088c-15.119 15.119-4.411 40.971 16.971 40.971H88v243.882H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.568 9.373 33.941 0l86.059-86.059c15.12-15.119 4.412-40.971-16.97-40.971z\"}})])]),_c('div',{ref:\"left\",staticClass:\"fov-handle\",attrs:{\"id\":\"left-handle\"},on:{\"mousedown\":function (e) { return _vm.startDrag(e); },\"mouseup\":function (e) { return _vm.endDrag(e); },\"touchstart\":function (e) { return _vm.startDrag(e); },\"touchend\":function (e) { return _vm.endDrag(e); }}},[_c('svg',{attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 512 512\"}},[_c('path',{attrs:{\"fill\":\"currentColor\",\"d\":\"M377.941 169.941V216H134.059v-46.059c0-21.382-25.851-32.09-40.971-16.971L7.029 239.029c-9.373 9.373-9.373 24.568 0 33.941l86.059 86.059c15.119 15.119 40.971 4.411 40.971-16.971V296h243.882v46.059c0 21.382 25.851 32.09 40.971 16.971l86.059-86.059c9.373-9.373 9.373-24.568 0-33.941l-86.059-86.059c-15.119-15.12-40.971-4.412-40.971 16.97z\"}})])]),_c('div',{ref:\"right\",staticClass:\"fov-handle\",attrs:{\"id\":\"right-handle\"},on:{\"mousedown\":function (e) { return _vm.startDrag(e); },\"mouseup\":function (e) { return _vm.endDrag(e); },\"touchstart\":function (e) { return _vm.startDrag(e); },\"touchend\":function (e) { return _vm.endDrag(e); }}},[_c('svg',{attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 512 512\"}},[_c('path',{attrs:{\"fill\":\"currentColor\",\"d\":\"M377.941 169.941V216H134.059v-46.059c0-21.382-25.851-32.09-40.971-16.971L7.029 239.029c-9.373 9.373-9.373 24.568 0 33.941l86.059 86.059c15.119 15.119 40.971 4.411 40.971-16.971V296h243.882v46.059c0 21.382 25.851 32.09 40.971 16.971l86.059-86.059c9.373-9.373 9.373-24.568 0-33.941l-86.059-86.059c-15.119-15.12-40.971-4.412-40.971 16.97z\"}})])]),_c('div',{ref:\"bottom\",staticClass:\"fov-handle\",attrs:{\"id\":\"bottom-handle\"},on:{\"mousedown\":function (e) { return _vm.startDrag(e); },\"mouseup\":function (e) { return _vm.endDrag(e); },\"touchstart\":function (e) { return _vm.startDrag(e); },\"touchend\":function (e) { return _vm.endDrag(e); }}},[_c('svg',{attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 256 512\"}},[_c('path',{attrs:{\"fill\":\"currentColor\",\"d\":\"M214.059 377.941H168V134.059h46.059c21.382 0 32.09-25.851 16.971-40.971L144.971 7.029c-9.373-9.373-24.568-9.373-33.941 0L24.971 93.088c-15.119 15.119-4.411 40.971 16.971 40.971H88v243.882H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.568 9.373 33.941 0l86.059-86.059c15.12-15.119 4.412-40.971-16.97-40.971z\"}})])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\r\nimport { BoxOffset, CropBox } from \"@/types\";\r\n\r\n@Component\r\nexport default class VideoCropControls extends Vue {\r\n  @Prop({ required: true }) cropBox!: CropBox;\r\n\r\n  private currentTarget: HTMLDivElement | null = null;\r\n  private boundDragHandle: ((e: MouseEvent | TouchEvent) => void) | null = null;\r\n  private boundEndDrag: ((e: Event) => void) | null = null;\r\n\r\n  $refs!: {\r\n    top: HTMLDivElement;\r\n    right: HTMLDivElement;\r\n    bottom: HTMLDivElement;\r\n    left: HTMLDivElement;\r\n    box: HTMLDivElement;\r\n  };\r\n\r\n  created() {\r\n    this.boundEndDrag = this.endDrag.bind(this);\r\n    window.addEventListener(\"mouseup\", this.boundEndDrag);\r\n    window.addEventListener(\"touchend\", this.boundEndDrag);\r\n  }\r\n\r\n  mounted() {\r\n    const cropBox = this.cropBox;\r\n    // Set the initial handle positions:\r\n    const left = cropBox.left;\r\n    const right = cropBox.right;\r\n\r\n    this.$refs.top.style.top = `${cropBox.top}%`;\r\n    this.$refs.right.style.right = `${right}%`;\r\n    this.$refs.bottom.style.bottom = `${cropBox.bottom}%`;\r\n    this.$refs.left.style.left = `${left}%`;\r\n    let offset = cropBox.top + (100 - (cropBox.bottom + cropBox.top)) * 0.5;\r\n    this.$refs.left.style.top = `${offset}%`;\r\n    this.$refs.right.style.top = `${offset}%`;\r\n    offset = left + (100 - (left + right)) * 0.5;\r\n    this.$refs.top.style.left = `${offset}%`;\r\n    this.$refs.bottom.style.left = `${offset}%`;\r\n  }\r\n\r\n  beforeDestroy() {\r\n    if (this.boundEndDrag) {\r\n      window.removeEventListener(\"mouseup\", this.boundEndDrag);\r\n      window.removeEventListener(\"touchend\", this.boundEndDrag);\r\n    }\r\n  }\r\n\r\n  startDrag(event: Event) {\r\n    if (this.boundDragHandle === null) {\r\n      this.boundDragHandle = this.dragHandle.bind(this);\r\n    }\r\n    const eventName = event.type === \"mousedown\" ? \"mousemove\" : \"touchmove\";\r\n    this.currentTarget = event.target as HTMLDivElement;\r\n    if (this.boundDragHandle) {\r\n      window.addEventListener(eventName, this.boundDragHandle);\r\n    }\r\n  }\r\n\r\n  endDrag(event: Event) {\r\n    const eventName = event.type === \"mouseup\" ? \"mousemove\" : \"touchmove\";\r\n    this.currentTarget = null;\r\n    if (this.boundDragHandle) {\r\n      window.removeEventListener(eventName, this.boundDragHandle);\r\n    }\r\n  }\r\n\r\n  dragHandle(event: MouseEvent | TouchEvent) {\r\n    const cropBox = { ...this.cropBox };\r\n    const cropTopHandle = this.$refs.top;\r\n    const cropRightHandle = this.$refs.right;\r\n    const cropBottomHandle = this.$refs.bottom;\r\n    const cropLeftHandle = this.$refs.left;\r\n    let position: { clientX: number; clientY: number };\r\n    if (!(event instanceof MouseEvent)) {\r\n      position = (event as TouchEvent).touches[0];\r\n    } else {\r\n      position = event;\r\n    }\r\n    const { clientX: x, clientY: y } = position;\r\n    const minDimensions = 20;\r\n    let maxInsetPercentage = 35;\r\n    const bounds = this.$refs.box.getBoundingClientRect();\r\n    let offset;\r\n    if (this.currentTarget) {\r\n      const l: BoxOffset = \"left\";\r\n      const r: BoxOffset = \"right\";\r\n      switch (this.currentTarget.id) {\r\n        case \"top-handle\":\r\n          maxInsetPercentage = 100 - (cropBox.bottom + minDimensions);\r\n          cropBox.top = Math.min(\r\n            maxInsetPercentage,\r\n            Math.max(0, 100 * ((y - bounds.top) / bounds.height))\r\n          );\r\n          cropTopHandle.style.top = `${cropBox.top}%`;\r\n          offset = cropBox.top + (100 - (cropBox.bottom + cropBox.top)) * 0.5;\r\n          cropLeftHandle.style.top = `${offset}%`;\r\n          cropRightHandle.style.top = `${offset}%`;\r\n          break;\r\n        case \"right-handle\":\r\n          maxInsetPercentage = 100 - (cropBox[l] + minDimensions);\r\n          cropBox[r] = Math.min(\r\n            maxInsetPercentage,\r\n            Math.max(0, 100 * ((bounds.right - x) / bounds.width))\r\n          );\r\n          cropRightHandle.style.right = `${cropBox[r]}%`;\r\n          offset = cropBox[l] + (100 - (cropBox[l] + cropBox[r])) * 0.5;\r\n          cropTopHandle.style.left = `${offset}%`;\r\n          cropBottomHandle.style.left = `${offset}%`;\r\n          break;\r\n        case \"bottom-handle\":\r\n          maxInsetPercentage = 100 - (cropBox.top + minDimensions);\r\n          cropBox.bottom = Math.min(\r\n            maxInsetPercentage,\r\n            Math.max(0, 100 * ((bounds.bottom - y) / bounds.height))\r\n          );\r\n          cropBottomHandle.style.bottom = `${cropBox.bottom}%`;\r\n          offset = cropBox.top + (100 - (cropBox.bottom + cropBox.top)) * 0.5;\r\n          cropLeftHandle.style.top = `${offset}%`;\r\n          cropRightHandle.style.top = `${offset}%`;\r\n          break;\r\n        case \"left-handle\":\r\n          maxInsetPercentage = 100 - (cropBox[r] + minDimensions);\r\n          cropBox[l] = Math.min(\r\n            maxInsetPercentage,\r\n            Math.max(0, 100 * ((x - bounds.left) / bounds.width))\r\n          );\r\n          cropLeftHandle.style.left = `${cropBox[l]}%`;\r\n          offset = cropBox[l] + (100 - (cropBox[l] + cropBox[r])) * 0.5;\r\n          cropTopHandle.style.left = `${offset}%`;\r\n          cropBottomHandle.style.left = `${offset}%`;\r\n          break;\r\n      }\r\n      // Update saved fovBox:\r\n      this.$parent.$emit(\"crop-changed\", cropBox);\r\n    }\r\n  }\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoCropControls.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoCropControls.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./VideoCropControls.vue?vue&type=template&id=45ccf73a&scoped=true&\"\nimport script from \"./VideoCropControls.vue?vue&type=script&lang=ts&\"\nexport * from \"./VideoCropControls.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./VideoCropControls.vue?vue&type=style&index=0&id=45ccf73a&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"45ccf73a\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Emit, Prop, Vue, Watch } from \"vue-property-decorator\";\nimport { Face } from \"@/face\";\nimport VideoCropControls from \"@/components/VideoCropControls.vue\";\nimport { CropBox, FaceInfo } from \"@/types\";\nimport { mdiCrop } from \"@mdi/js\";\n\n@Component({ components: { VideoCropControls } })\nexport default class VideoStream extends Vue {\n  @Prop() public frame!: Uint16Array;\n  @Prop({ required: true }) public min!: number;\n  @Prop({ required: true }) public max!: number;\n  @Prop({ required: true }) public face!: FaceInfo | null;\n  @Prop({ required: true }) public cropBox!: CropBox;\n  @Prop({ required: true }) public cropEnabled!: boolean;\n  @Prop({ default: 1.0 }) public scale!: number;\n  @Prop({ default: false }) public drawOverlays!: boolean;\n  @Prop({ default: false }) public recording!: boolean;\n  @Prop({ default: false }) public showCoords!: boolean;\n  private canEditCropping = false;\n\n  $refs!: {\n    cameraStream: HTMLCanvasElement;\n    vizOverlay: HTMLCanvasElement;\n    container: HTMLDivElement;\n  };\n\n  get cropIcon() {\n    return mdiCrop;\n  }\n\n  private coords: { x: number; y: number } = { x: 0, y: 0 };\n\n  mounted() {\n    const container = this.$refs.container;\n    container.style.width = `${375 * this.scale}px`;\n    container.style.height = `${500 * this.scale}px`;\n\n    if (this.showCoords) {\n      container.addEventListener(\"mousemove\", this.onMouseMove);\n    }\n\n    if (this.frame) {\n      this.onFrameUpdate(this.frame);\n      this.updateOverlayCanvas();\n    }\n  }\n\n  onMouseMove(e: MouseEvent) {\n    const rect = (e.target as HTMLElement).getBoundingClientRect();\n    const x = Math.floor(\n      Math.min(((e.clientX - rect.x) / rect.width) * 120, 119)\n    );\n    const y = Math.floor(\n      Math.min(((e.clientY - rect.y) / rect.height) * 160, 159)\n    );\n    this.coords = { x, y };\n  }\n\n  beforeDestroy() {\n    if (this.showCoords) {\n      this.$refs.container.removeEventListener(\"mousemove\", this.onMouseMove);\n    }\n  }\n\n  updateOverlayCanvas() {\n    const underlay = this.$refs.cameraStream;\n    const canvas = this.$refs.vizOverlay;\n    const canvasWidth = canvas.width * window.devicePixelRatio;\n    const canvasHeight = canvas.height * window.devicePixelRatio;\n    const context = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\n    context.clearRect(0, 0, canvasWidth, canvasHeight);\n    if (this.drawOverlays) {\n      context.save();\n      const scaleX = canvasWidth / (underlay.height * window.devicePixelRatio);\n      const scaleY = canvasHeight / (underlay.width * window.devicePixelRatio);\n      context.scale(scaleX, scaleY);\n      const face = this.face;\n      if (face) {\n        // Now find the hotspot - only if we have a good lock!\n        context.lineWidth = 0.25;\n        if (face.isValid) {\n          let valid: boolean = face.isValid;\n          if (face.headLock >= 1.0) {\n            context.strokeStyle = \"red\";\n            context.lineWidth = 0.5;\n          } else if (face.headLock === 0.5) {\n            context.strokeStyle = \"blue\";\n          } else {\n            context.strokeStyle = \"orange\";\n            valid = false;\n          }\n          if (valid) {\n            const point = face.samplePoint;\n\n            context.beginPath();\n            context.strokeStyle = \"rgba(255, 0, 0, 0.7)\";\n            context.lineWidth = 1;\n            context.arc(point.x - 0.5, point.y - 0.5, 2, 0, Math.PI * 2);\n            context.stroke();\n\n            context.beginPath();\n            context.moveTo(face.head.bottomLeft.x, face.head.bottomLeft.y);\n            context.lineTo(face.head.topLeft.x, face.head.topLeft.y);\n            context.lineTo(face.head.topRight.x, face.head.topRight.y);\n            context.lineTo(face.head.bottomRight.x, face.head.bottomRight.y);\n            context.lineTo(face.head.bottomLeft.x, face.head.bottomLeft.y);\n            context.stroke();\n          }\n        }\n        // context.moveTo(face.vertical.bottom.x, face.vertical.bottom.y);\n        // context.lineTo(face.vertical.top.x, face.vertical.top.y);\n        // context.moveTo(face.horizontal.left.x, face.horizontal.left.y);\n        // context.lineTo(face.horizontal.right.x, face.horizontal.right.y);\n\n        // context.moveTo(face.forehead.bottomLeft.x, face.forehead.bottomLeft.y);\n        // context.lineTo(\n        //   face.forehead.bottomRight.x,\n        //   face.forehead.bottomRight.y\n        // );\n        // context.moveTo(face.forehead.topLeft.x, face.forehead.topLeft.y);\n        // context.lineTo(face.forehead.topRight.x, face.forehead.topRight.y);\n      }\n      context.restore();\n    }\n\n    context.save();\n    if (this.cropBox) {\n      // Update crop-box overlay:\n      const overlay = new Path2D();\n      const cropBox = this.cropBox;\n      context.scale(1, 1);\n      const width = canvas.width;\n      const height = canvas.height;\n      overlay.rect(0, 0, width, height);\n\n      const onePercentWidth = width / 100;\n      const onePercentHeight = height / 100;\n\n      const leftInset = onePercentWidth * cropBox.left;\n      const rightInset = onePercentWidth * cropBox.right;\n      const topInset = onePercentHeight * cropBox.top;\n      const bottomInset = onePercentHeight * cropBox.bottom;\n      overlay.rect(\n        leftInset,\n        topInset,\n        width - (rightInset + leftInset),\n        height - (bottomInset + topInset)\n      );\n      context.fillStyle = \"rgba(0, 0, 0, 0.5)\";\n      context.fill(overlay, \"evenodd\");\n    }\n    context.restore();\n  }\n\n  toggleCropping() {\n    this.canEditCropping = !this.canEditCropping;\n    if (!this.canEditCropping) {\n      this.saveCropChanges();\n    }\n  }\n\n  saveCropChanges() {\n    this.$parent.$emit(\"save-crop-changes\");\n  }\n\n  @Watch(\"frame\")\n  onFrameUpdate(next: Uint16Array) {\n    // TODO(jon): Why does this sometimes get called when the smoothed image array is empty?\n    const canvas = this.$refs.cameraStream;\n    const context = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\n    const imgData = context.getImageData(0, 0, canvas.width, canvas.height);\n    const frameData = next;\n    const max = this.max;\n    const min = this.min;\n    if (min !== Number.MAX_SAFE_INTEGER) {\n      const data = new Uint32Array(imgData.data.buffer);\n      const range = max - min;\n      for (let i = 0; i < data.length; i++) {\n        const v = Math.max(\n          0,\n          Math.min(255, ((frameData[i] - min) / range) * 255.0)\n        );\n        data[i] = (255 << 24) | (v << 16) | (v << 8) | v;\n      }\n      context.putImageData(imgData, 0, 0);\n    }\n  }\n\n  @Watch(\"face\")\n  onFaceChanged() {\n    this.updateOverlayCanvas();\n  }\n\n  @Watch(\"thermalReference\")\n  onThermalReferenceChanged() {\n    this.updateOverlayCanvas();\n  }\n\n  @Watch(\"cropBox\")\n  onCropChanged() {\n    this.updateOverlayCanvas();\n  }\n\n  @Emit(\"crop-changed\")\n  gotCropChange(cropBox: CropBox) {\n    this.updateOverlayCanvas();\n    return cropBox;\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoStream.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoStream.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./VideoStream.vue?vue&type=template&id=6544bfa0&scoped=true&\"\nimport script from \"./VideoStream.vue?vue&type=script&lang=ts&\"\nexport * from \"./VideoStream.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./VideoStream.vue?vue&type=style&index=0&id=6544bfa0&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6544bfa0\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\ninstallComponents(component, {VBtn,VIcon})\n","import { CalibrationInfo, NetworkInterface } from \"./types\";\r\nimport { CalibrationConfig, ScreeningEvent } from \"@/types\";\r\nimport { Frame } from \"@/camera\";\r\nconst FAKE_THERMAL_CAMERA_SERVER = \"http://localhost:2040\";\r\n\r\nconst API_BASE =\r\n  \"https://ixg63w0770.execute-api.ap-southeast-2.amazonaws.com/event\";\r\nexport const ScreeningApi = {\r\n  async recordScreeningEvent(\r\n    deviceName: string,\r\n    deviceId: number,\r\n    data: ScreeningEvent\r\n  ) {\r\n    const request = fetch(API_BASE, {\r\n      method: \"POST\",\r\n      body: JSON.stringify({\r\n        CameraID: `${deviceName}|${deviceId}|${data.frame.frameInfo.Camera.CameraSerial}`,\r\n        Type: \"Screen\",\r\n        Timestamp: data.timestamp\r\n          .toISOString()\r\n          .replace(/:/g, \"_\")\r\n          .replace(/\\./g, \"_\"),\r\n        TemperatureRawValue: Math.round(data.rawTemperatureValue),\r\n        RefTemperatureValue: data.thermalReference.val,\r\n        AppVersion: data.frame.frameInfo.AppVersion,\r\n        Meta: {\r\n          Sample: { x: data.sampleX, y: data.sampleY },\r\n          Telemetry: data.frame.frameInfo.Telemetry\r\n        }\r\n      })\r\n    });\r\n    const response = await request;\r\n    try {\r\n      const presignedUrl = await response.text();\r\n      // Based on the user, we find out whether or not to upload a reference image.\r\n      if (presignedUrl) {\r\n        // Upload to s3\r\n        const response = await fetch(presignedUrl, {\r\n          method: \"POST\",\r\n          body: data.frame.frame,\r\n          mode: \"no-cors\"\r\n        });\r\n        console.log(await response.text());\r\n      } else {\r\n        // Error?\r\n      }\r\n    } catch (e) {\r\n      console.log(response.status);\r\n    }\r\n  },\r\n  async recordCalibrationEvent(\r\n    deviceName: string,\r\n    deviceId: number,\r\n    calibration: CalibrationConfig,\r\n    frame: Frame,\r\n    x: number,\r\n    y: number\r\n  ) {\r\n    const cameraSerial = frame.frameInfo.Camera.CameraSerial;\r\n    const appVersion = frame.frameInfo.AppVersion;\r\n    const request = fetch(API_BASE, {\r\n      method: \"POST\",\r\n      body: JSON.stringify({\r\n        CameraID: `${deviceName}|${deviceId}|${cameraSerial}`,\r\n        Type: \"Calibrate\",\r\n        Timestamp: calibration.timestamp\r\n          .toISOString()\r\n          .replace(/:/g, \"_\")\r\n          .replace(/\\./g, \"_\"),\r\n        CalibratedTemp: calibration.calibrationTemperature.val.toFixed(2),\r\n        MinFeverThreshold: calibration.thresholdMinFever,\r\n        ThermalRefTemp: calibration.thermalRefTemperature.val.toFixed(2),\r\n        RefTemperatureValue: Math.round(calibration.thermalReferenceRawValue),\r\n        TemperatureRawValue: Math.round(calibration.hotspotRawTemperatureValue),\r\n        AppVersion: appVersion,\r\n        Meta: {\r\n          Sample: { x, y },\r\n          Telemetry: frame.frameInfo.Telemetry,\r\n          Crop: calibration.cropBox\r\n        }\r\n      })\r\n    });\r\n    const response = await request;\r\n    try {\r\n      const presignedUrl = await response.text();\r\n      // Based on the user, we find out whether or not to upload a reference image.\r\n      if (presignedUrl) {\r\n        // Upload to s3\r\n        const response = await fetch(presignedUrl, {\r\n          method: \"POST\",\r\n          body: frame.frame,\r\n          mode: \"no-cors\"\r\n        });\r\n        console.log(await response.text());\r\n      } else {\r\n        // Error?\r\n      }\r\n    } catch (e) {\r\n      console.log(response.status);\r\n    }\r\n  }\r\n};\r\n\r\nexport const DeviceApi = {\r\n  get debugPrefix() {\r\n    if (window.location.port === \"8080\" || window.location.port === \"5000\") {\r\n      // Used for developing the front-end against an externally running version of the\r\n      // backend, so it's not necessary to package up the build to do front-end testing.\r\n      //return \"http://localhost:2041\";\r\n      //return \"http://192.168.178.37\";\r\n      //return \"http://192.168.178.21\";\r\n      return \"http://192.168.0.40\";\r\n    }\r\n    return \"\";\r\n  },\r\n  get SOFTWARE_VERSION() {\r\n    return `${this.debugPrefix}/api/version`;\r\n  },\r\n  get DEVICE_INFO() {\r\n    return `${this.debugPrefix}/api/device-info`;\r\n  },\r\n  get DEVICE_TIME() {\r\n    return `${this.debugPrefix}/api/clock`;\r\n  },\r\n  get DEVICE_CONFIG() {\r\n    return `${this.debugPrefix}/api/config`;\r\n  },\r\n  get NETWORK_INFO() {\r\n    return `${this.debugPrefix}/api/network-info`;\r\n  },\r\n  get SAVE_CALIBRATION() {\r\n    return `${this.debugPrefix}/api/calibration/save`;\r\n  },\r\n  get LOAD_CALIBRATION() {\r\n    return `${this.debugPrefix}/api/calibration/get`;\r\n  },\r\n  get RECORDER_STATUS() {\r\n    return `${this.debugPrefix}/recorderstatus`;\r\n  },\r\n  get START_RECORDING() {\r\n    return `${this.debugPrefix}/record?start=true`;\r\n  },\r\n  get DOWNLOAD_RECORDING() {\r\n    return `${this.debugPrefix}/record?stop=true`;\r\n  },\r\n  async get(url: string) {\r\n    return fetch(url, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Authorization: `Basic ${btoa(\"admin:feathers\")}`\r\n      }\r\n    });\r\n  },\r\n  async post(\r\n    url: string,\r\n    data:\r\n      | Blob\r\n      | BufferSource\r\n      | FormData\r\n      | URLSearchParams\r\n      | ReadableStream<Uint8Array>\r\n      | string\r\n      | null\r\n  ) {\r\n    return fetch(url, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Authorization: `Basic ${btoa(\"admin:feathers\")}`,\r\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\r\n      },\r\n      body: data\r\n    });\r\n  },\r\n  async getJSON(url: string) {\r\n    const response = await this.get(url);\r\n    try {\r\n      return response.json();\r\n    } catch (e) {\r\n      return {};\r\n    }\r\n  },\r\n  async getText(url: string) {\r\n    const response = await this.get(url);\r\n    return response.text();\r\n  },\r\n  async softwareVersion(): Promise<{\r\n    apiVersion: number;\r\n    appVersion: string;\r\n    binaryVersion: string;\r\n  }> {\r\n    return this.getJSON(this.SOFTWARE_VERSION);\r\n  },\r\n  async startRecording(): Promise<boolean> {\r\n    const result = await this.getText(this.START_RECORDING);\r\n    return result === \"<nil>\";\r\n  },\r\n  async deviceInfo(): Promise<{\r\n    serverURL: string;\r\n    groupname: string;\r\n    devicename: string;\r\n    deviceID: number;\r\n  }> {\r\n    return this.getJSON(this.DEVICE_INFO);\r\n  },\r\n  async deviceTime() {\r\n    return this.getJSON(this.DEVICE_TIME);\r\n  },\r\n  async recorderStatus() {\r\n    return this.getJSON(this.RECORDER_STATUS);\r\n  },\r\n  async deviceConfig() {\r\n    return this.getJSON(this.DEVICE_CONFIG);\r\n  },\r\n  async networkInfo(): Promise<{\r\n    Interfaces: NetworkInterface[];\r\n    Config: { Online: boolean };\r\n  }> {\r\n    return this.getJSON(this.NETWORK_INFO);\r\n  },\r\n  async saveCalibration(data: CalibrationInfo) {\r\n    // NOTE: This API only supports a json payload one level deep.  No nested structures.\r\n    const formData = new URLSearchParams();\r\n    formData.append(\"calibration\", JSON.stringify(data));\r\n    return this.post(this.SAVE_CALIBRATION, formData);\r\n  },\r\n  async getCalibration(): Promise<CalibrationInfo> {\r\n    return this.getJSON(this.LOAD_CALIBRATION);\r\n  }\r\n};\r\n\r\nexport const FakeThermalCameraApi = {\r\n  async isFakeThermalCamera(): Promise<boolean> {\r\n    // Try fetching on localhost:2040,\r\n    const response = await fetch(FAKE_THERMAL_CAMERA_SERVER);\r\n    if (response.status !== 200) {\r\n      return false;\r\n    }\r\n    const message = await response.text();\r\n    return message === \"This is a Fake thermal camera test server.\";\r\n  },\r\n  async listFakeThermalCameraFiles(): Promise<string[]> {\r\n    const response = await fetch(`${FAKE_THERMAL_CAMERA_SERVER}/list`);\r\n    try {\r\n      return response.json();\r\n    } catch (e) {\r\n      return [];\r\n    }\r\n  },\r\n  async playbackCptvFile(file: string, repeatCount: number): Promise<boolean> {\r\n    const response = await this.getText(\r\n      `${FAKE_THERMAL_CAMERA_SERVER}/sendCPTVFrames?${new URLSearchParams(\r\n        Object.entries({\r\n          \"cptv-file\": file,\r\n          repeat: repeatCount.toString()\r\n        })\r\n      )}`\r\n    );\r\n    return response === \"Success\";\r\n  },\r\n  async stopPlayback(): Promise<boolean> {\r\n    const response = await this.getText(\r\n      `${FAKE_THERMAL_CAMERA_SERVER}/playback?stop=true`\r\n    );\r\n    return response === \"Success\";\r\n  },\r\n  async pausePlayback(): Promise<boolean> {\r\n    const response = await this.getText(\r\n      `${FAKE_THERMAL_CAMERA_SERVER}/playback?pause=true`\r\n    );\r\n    return response === \"Success\";\r\n  },\r\n  async resumePlayback(): Promise<boolean> {\r\n    const response = await this.getText(\r\n      `${FAKE_THERMAL_CAMERA_SERVER}/playback?play=true`\r\n    );\r\n    return response === \"Success\";\r\n  },\r\n  async get(url: string) {\r\n    return fetch(url, {\r\n      method: \"GET\"\r\n    });\r\n  },\r\n  async getJSON(url: string) {\r\n    const response = await this.get(url);\r\n    try {\r\n      return response.json();\r\n    } catch (e) {\r\n      return {};\r\n    }\r\n  },\r\n  async getText(url: string) {\r\n    const response = await this.get(url);\r\n    return response.text();\r\n  }\r\n};\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from \"vue-property-decorator\";\nimport { AppState, CropBox, ScreeningEvent, ScreeningState } from \"@/types\";\nimport {\n  DEFAULT_THRESHOLD_MIN_FEVER,\n  DEFAULT_THRESHOLD_MIN_NORMAL,\n  State\n} from \"@/main\";\nimport VideoStream from \"@/components/VideoStream.vue\";\nimport { DegreesCelsius } from \"@/utils\";\nimport { mdiMinus, mdiPencil, mdiPlus } from \"@mdi/js\";\nimport { DeviceApi, ScreeningApi } from \"@/api/api\";\n\n@Component({\n  components: { VideoStream }\n})\nexport default class CalibrationSettings extends Vue {\n  private useCustomTemperatureRange = false;\n  private editedTemperatureThreshold = 0;\n  private showCalibrationDialog = false;\n  private editedCropBox: CropBox | null = null;\n  private editedCalibration: DegreesCelsius = new DegreesCelsius(0);\n  private pendingCalibration: DegreesCelsius = new DegreesCelsius(0);\n  private snapshotScreeningEvent: ScreeningEvent | null = null;\n  private playNormalSound = true;\n  private playWarningSound = true;\n  private playErrorSound = true;\n  private deviceName = \"\";\n  private deviceID = 0;\n\n  toggleCustomTemperatureThresholds(val: boolean) {\n    if (val) {\n      this.editedTemperatureThreshold = this.state.currentCalibration.thresholdMinFever;\n    }\n    if (!val) {\n      this.editedTemperatureThreshold = DEFAULT_THRESHOLD_MIN_FEVER;\n    }\n    // Update custom back to defaults\n  }\n\n  get selectedTemperatureRange() {\n    return `${new DegreesCelsius(this.editedTemperatureThreshold)}`;\n  }\n\n  get hasMadeEdits(): boolean {\n    const unedited = {\n      cropBox: this.state.currentCalibration.cropBox,\n      temperatureThresholds: [this.state.currentCalibration.thresholdMinFever],\n      calibration: this.state.currentCalibration.calibrationTemperature.val\n    };\n    const edited = {\n      cropBox: this.editedCropBox,\n      temperatureThresholds: this.editedTemperatureThreshold,\n      calibration: parseFloat(this.editedCalibration.val.toFixed(2))\n    };\n    const a = JSON.stringify(edited);\n    const b = JSON.stringify(unedited);\n    return a != b;\n  }\n\n  get plusIcon() {\n    return mdiPlus;\n  }\n\n  get pencilIcon() {\n    return mdiPencil;\n  }\n\n  get minusIcon() {\n    return mdiMinus;\n  }\n\n  get state(): AppState {\n    return State;\n  }\n\n  get canCalibrate() {\n    return this.latestScreeningEvent !== null;\n  }\n\n  onCropChanged(box: CropBox) {\n    this.editedCropBox = box;\n  }\n\n  get screeningState(): ScreeningState {\n    return this.state.currentScreeningState;\n  }\n\n  get latestScreeningEvent(): ScreeningEvent | null {\n    return this.state.currentScreeningEvent;\n  }\n\n  get calibration(): DegreesCelsius {\n    return this.pendingCalibration;\n  }\n\n  editCalibration() {\n    this.editedCalibration = new DegreesCelsius(this.calibration.val);\n    this.snapshotScreeningEvent = this.latestScreeningEvent;\n    this.showCalibrationDialog = true;\n  }\n\n  async acceptCalibration() {\n    this.pendingCalibration = new DegreesCelsius(this.editedCalibration.val);\n    this.showCalibrationDialog = false;\n  }\n\n  async persistSettings(): Promise<Response | undefined> {\n    // Get these values from the current screening event.\n    const cropBox = this.editedCropBox!;\n    const currentCalibration = this.pendingCalibration;\n    let thermalRefTemp = this.state.currentCalibration.thermalRefTemperature\n      .val;\n    console.log(JSON.stringify(this.state.currentCalibration, null, \"\\t\"));\n    let thermalRefRaw = this.state.currentCalibration.thermalReferenceRawValue;\n    let rawTempValue = this.state.currentCalibration.hotspotRawTemperatureValue;\n    const thresholdMinFever = this.editedTemperatureThreshold;\n    if (this.snapshotScreeningEvent) {\n      let sampleX = -1;\n      let sampleY = -1;\n\n      thermalRefRaw = this.snapshotScreeningEvent.thermalReference.val;\n      rawTempValue = this.snapshotScreeningEvent.rawTemperatureValue;\n      thermalRefTemp =\n        currentCalibration.val - (rawTempValue - thermalRefRaw) * 0.01;\n      sampleX = this.snapshotScreeningEvent.sampleX;\n      sampleY = this.snapshotScreeningEvent.sampleY;\n\n      const timestamp = new Date();\n      ScreeningApi.recordCalibrationEvent(\n        this.deviceName,\n        this.deviceID,\n        {\n          cropBox,\n          timestamp: timestamp,\n          calibrationTemperature: currentCalibration,\n          hotspotRawTemperatureValue: rawTempValue,\n          thermalRefTemperature: new DegreesCelsius(thermalRefTemp),\n          thermalReferenceRawValue: thermalRefRaw,\n          thresholdMinFever\n        },\n        this.snapshotScreeningEvent.frame,\n        sampleX,\n        sampleY\n      );\n\n      return DeviceApi.saveCalibration({\n        ThresholdMinFever: thresholdMinFever,\n        ThermalRefTemp: thermalRefTemp,\n        TemperatureCelsius: currentCalibration.val,\n        Top: cropBox.top,\n        Right: cropBox.right,\n        Left: cropBox.left,\n        Bottom: cropBox.bottom,\n        UuidOfUpdater: this.state.uuid,\n        CalibrationBinaryVersion: this.state.currentFrame!.frameInfo\n          .BinaryVersion,\n        SnapshotTime: timestamp.getTime(),\n        SnapshotValue: rawTempValue,\n        UseNormalSound: true,\n        UseWarningSound: true,\n        UseErrorSound: true\n      });\n    }\n    return;\n  }\n\n  incrementCalibration(amount: number) {\n    this.editedCalibration = new DegreesCelsius(\n      this.editedCalibration.val + amount\n    );\n  }\n\n  updateCalibration(event: FocusEvent) {\n    const value = (event.target as HTMLInputElement).value\n      .replace(\"&deg;\", \"\")\n      .replace(\"°\", \"\");\n    if (isNaN(Number(value))) {\n      this.editedCalibration = new DegreesCelsius(36);\n    }\n    this.editedCalibration = new DegreesCelsius(Number(value));\n  }\n\n  resetEdits() {\n    this.editedCropBox = { ...this.state.currentCalibration.cropBox };\n    this.pendingCalibration = new DegreesCelsius(\n      this.state.currentCalibration.calibrationTemperature.val\n    );\n    this.editedCalibration = new DegreesCelsius(\n      this.state.currentCalibration.calibrationTemperature.val\n    );\n    this.editedTemperatureThreshold = this.state.currentCalibration.thresholdMinFever;\n    this.useCustomTemperatureRange =\n      this.editedTemperatureThreshold !== DEFAULT_THRESHOLD_MIN_FEVER;\n  }\n\n  private saving = false;\n  async saveEdits() {\n    this.saving = true;\n    await this.persistSettings();\n    this.saving = false;\n  }\n\n  saveSounds() {\n    window.localStorage.setItem(\n      \"playNormalSound\",\n      JSON.stringify(this.playNormalSound)\n    );\n    window.localStorage.setItem(\n      \"playWarningSound\",\n      JSON.stringify(this.playWarningSound)\n    );\n    window.localStorage.setItem(\n      \"playErrorSound\",\n      JSON.stringify(this.playErrorSound)\n    );\n  }\n\n  async beforeMount() {\n    const { deviceID, devicename } = await DeviceApi.deviceInfo();\n    this.deviceID = deviceID;\n    this.deviceName = devicename;\n    this.playNormalSound = JSON.parse(\n      window.localStorage.getItem(\"playNormalSound\") || \"true\"\n    );\n    this.playWarningSound = JSON.parse(\n      window.localStorage.getItem(\"playWarningSound\") || \"true\"\n    );\n    this.playErrorSound = JSON.parse(\n      window.localStorage.getItem(\"playErrorSound\") || \"true\"\n    );\n    this.resetEdits();\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CalibrationSettings.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CalibrationSettings.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CalibrationSettings.vue?vue&type=template&id=24c81863&scoped=true&\"\nimport script from \"./CalibrationSettings.vue?vue&type=script&lang=ts&\"\nexport * from \"./CalibrationSettings.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./CalibrationSettings.vue?vue&type=style&index=0&id=24c81863&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"24c81863\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardSubtitle } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCheckbox } from 'vuetify/lib/components/VCheckbox';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VOverlay } from 'vuetify/lib/components/VOverlay';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSlider } from 'vuetify/lib/components/VSlider';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VSwitch } from 'vuetify/lib/components/VSwitch';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardSubtitle,VCardText,VCardTitle,VCheckbox,VCol,VContainer,VDialog,VIcon,VOverlay,VRow,VSlider,VSpacer,VSwitch,VTextField})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{attrs:{\"flat\":\"\"}},[(_vm.items)?_c('v-simple-table',{scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('thead',[_c('tr',[_c('th',{staticClass:\"text-left\"},[_vm._v(\"Device config\")]),_c('th',{staticClass:\"text-left\"})])]),_c('tbody',_vm._l((_vm.items),function(ref){\nvar name = ref[0];\nvar item = ref[1];\nreturn _c('tr',{key:name},[_c('td',[_vm._v(_vm._s(name))]),_c('td',[_vm._v(_vm._s(item))])])}),0)]},proxy:true}],null,false,421180828)}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue } from \"vue-property-decorator\";\r\nimport { AppState } from \"@/types\";\r\nimport { State } from \"@/main\";\r\nimport { DeviceApi } from \"@/api/api\";\r\nimport { CameraInfo, NetworkInterface } from \"@/api/types\";\r\n\r\n@Component\r\nexport default class DeviceInfo extends Vue {\r\n  private info: {\r\n    serverURL?: string;\r\n    groupname?: string;\r\n    devicename?: string;\r\n    deviceID?: number;\r\n  } = {};\r\n  private networkInfo: {\r\n    Interfaces?: NetworkInterface[];\r\n    IPAddress?: string;\r\n    Config?: { Online: boolean };\r\n    Online?: boolean;\r\n  } = {};\r\n  private softwareVersion: {\r\n    apiVersion?: number;\r\n    appVersion?: string;\r\n    binaryVersion?: string;\r\n  } = {};\r\n\r\n  get items() {\r\n    return [\r\n      ...Object.entries(this.info),\r\n      ...Object.entries(this.softwareVersion),\r\n      ...Object.entries(this.networkInfo),\r\n      ...Object.entries(this.cameraInfo)\r\n    ];\r\n  }\r\n\r\n  get cameraInfo() {\r\n    const camera: CameraInfo = {\r\n      ...State.currentFrame?.frameInfo.Camera\r\n    } as CameraInfo;\r\n    delete camera.ResX;\r\n    delete camera.ResY;\r\n    delete camera.FPS;\r\n    return camera;\r\n  }\r\n\r\n  get state(): AppState {\r\n    return State;\r\n  }\r\n\r\n  async beforeMount() {\r\n    // Get all the device data.\r\n    const info = await DeviceApi.deviceInfo();\r\n\r\n    delete info.serverURL;\r\n    delete info.groupname;\r\n\r\n    this.info = info;\r\n    const networkInfo = await DeviceApi.networkInfo();\r\n    let IPAddress = networkInfo.Interfaces.filter(\r\n      nic => nic.IPAddresses !== null\r\n    ).map(nic => nic.IPAddresses![0])[0];\r\n    IPAddress = IPAddress.substring(0, IPAddress.indexOf(\"/\"));\r\n    this.networkInfo = {\r\n      Online: networkInfo.Config.Online,\r\n      IPAddress\r\n    };\r\n\r\n    const softwareVersion = await DeviceApi.softwareVersion();\r\n    softwareVersion.binaryVersion = softwareVersion.binaryVersion.substring(\r\n      0,\r\n      10\r\n    );\r\n    const newLine = softwareVersion.appVersion.indexOf(\"\\n\");\r\n    if (newLine !== -1) {\r\n      softwareVersion.appVersion = softwareVersion.appVersion.substring(\r\n        0,\r\n        newLine\r\n      );\r\n    }\r\n    delete softwareVersion.apiVersion;\r\n    this.softwareVersion = softwareVersion;\r\n  }\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeviceInfo.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeviceInfo.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DeviceInfo.vue?vue&type=template&id=ba8536b0&scoped=true&\"\nimport script from \"./DeviceInfo.vue?vue&type=script&lang=ts&\"\nexport * from \"./DeviceInfo.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ba8536b0\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VSimpleTable } from 'vuetify/lib/components/VDataTable';\ninstallComponents(component, {VCard,VSimpleTable})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{attrs:{\"flat\":\"\",\"height\":\"calc(100vh - 112px)\"}},[_c('v-container',{staticClass:\"cont\"},[_c('v-card',[_c('VideoStream',{attrs:{\"frame\":_vm.state.currentFrame.frame,\"face\":_vm.state.face,\"min\":_vm.state.currentFrame.analysisResult.heatStats.min,\"max\":_vm.state.currentFrame.analysisResult.heatStats.max,\"crop-box\":_vm.editedThermalRefMask,\"crop-enabled\":true,\"recording\":_vm.isRecording},on:{\"crop-changed\":_vm.onMaskChanged}}),_c('div',{staticClass:\"buttons\"},[(_vm.isRunningInAndroidWebview)?_c('div',[_vm._v(\" To make recordings this needs to be running inside a browser, not the Te Kahu Ora app. \")]):_c('div',[_c('v-btn',{attrs:{\"center\":\"\"},on:{\"click\":_vm.toggleRecording}},[_vm._v(\" \"+_vm._s(!_vm.isRecording ? \"Record\" : \"Stop Recording\")+\" \")])],1)])],1),_c('v-card',[_c('v-card-actions',[_c('v-btn',{on:{\"click\":_vm.skipWarmup}},[_vm._v(\"Skip warmup period\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from \"vue-property-decorator\";\nimport VideoStream from \"@/components/VideoStream.vue\";\nimport { State } from \"@/main\";\nimport { AppState, CropBox } from \"@/types\";\nimport { DeviceApi } from \"@/api/api\";\n\nfunction download(dataurl: string) {\n  const a = document.createElement(\"a\");\n  a.href = dataurl;\n  a.setAttribute(\"download\", dataurl);\n  a.click();\n}\n\n@Component({\n  components: {\n    VideoStream\n  }\n})\nexport default class DeveloperUtilities extends Vue {\n  private editedThermalRefMask: CropBox | null = null;\n  private isRecording = false;\n\n  skipWarmup() {\n    this.$root.$children[0].$children[0].$emit(\"skip-warmup\");\n  }\n\n  onMaskChanged(box: CropBox) {\n    this.editedThermalRefMask = box;\n  }\n\n  get state(): AppState {\n    return State;\n  }\n\n  get isRunningInAndroidWebview(): boolean {\n    return window.navigator.userAgent === \"feverscreen-app\";\n  }\n\n  async toggleRecording() {\n    const { recording, processor } = await DeviceApi.recorderStatus();\n    if (!processor) {\n      return false;\n    }\n    if (recording) {\n      download(DeviceApi.DOWNLOAD_RECORDING);\n      this.isRecording = false;\n    } else {\n      this.isRecording = await DeviceApi.startRecording();\n    }\n  }\n\n  async mounted() {\n    const { recording } = await DeviceApi.recorderStatus();\n    this.isRecording = recording;\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeveloperUtilities.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DeveloperUtilities.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DeveloperUtilities.vue?vue&type=template&id=e0112a36&scoped=true&\"\nimport script from \"./DeveloperUtilities.vue?vue&type=script&lang=ts&\"\nexport * from \"./DeveloperUtilities.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./DeveloperUtilities.vue?vue&type=style&index=0&id=e0112a36&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e0112a36\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCard,VCardActions,VContainer})\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Emit, Vue } from \"vue-property-decorator\";\nimport CalibrationSettings from \"@/components/CalibrationSettings.vue\";\nimport DeviceInfo from \"@/components/DeviceInfo.vue\";\nimport DeveloperUtilities from \"@/components/DeveloperUtilities.vue\";\n\ninterface TabItem {\n  tab: string;\n  content: any;\n}\n\n@Component({\n  components: {\n    CalibrationSettings,\n    DeviceInfo,\n    DeveloperUtilities\n  }\n})\nexport default class AdminSettings extends Vue {\n  private tab: TabItem | null = null;\n  private tabItems: TabItem[] = [\n    {\n      tab: \"Calibration\",\n      content: CalibrationSettings\n    },\n    {\n      tab: \"Device info\",\n      content: DeviceInfo\n    },\n    {\n      tab: \"Developer\",\n      content: DeveloperUtilities\n    }\n  ];\n\n  @Emit(\"closed\")\n  close() {\n    return true;\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminSettings.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminSettings.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./AdminSettings.vue?vue&type=template&id=34541e83&scoped=true&\"\nimport script from \"./AdminSettings.vue?vue&type=script&lang=ts&\"\nexport * from \"./AdminSettings.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"34541e83\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTab } from 'vuetify/lib/components/VTabs';\nimport { VTabItem } from 'vuetify/lib/components/VTabs';\nimport { VTabs } from 'vuetify/lib/components/VTabs';\nimport { VTabsItems } from 'vuetify/lib/components/VTabs';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBtn,VCard,VSpacer,VTab,VTabItem,VTabs,VTabsItems,VToolbar,VToolbarTitle})\n","import { Shape, Span } from \"@/shape-processing\";\nimport { RawShape } from \"@/types\";\n\nexport const WIDTH = 120;\nexport const HEIGHT = 160;\n\nexport interface Rect {\n  x0: number;\n  x1: number;\n  y0: number;\n  y1: number;\n}\n\nexport interface Point {\n  x: number;\n  y: number;\n}\n\nexport interface Vec2 {\n  x: number;\n  y: number;\n}\n\nexport const startP = ({ x0, y }: Span): Point => ({ x: x0, y });\nexport const endP = ({ x1, y }: Span): Point => ({ x: x1, y });\nexport const distanceSq = (a: Point, b: Point): number => {\n  const dX = a.x - b.x;\n  const dY = a.y - b.y;\n  return dX * dX + dY * dY;\n};\nexport const distance = (a: Point, b: Point): number =>\n  Math.sqrt(distanceSq(a, b));\n\nexport const distanceSq2 = (\n  a: [number, number],\n  b: [number, number]\n): number => {\n  const dX = a[0] - b[0];\n  const dY = a[1] - b[1];\n  return dX * dX + dY * dY;\n};\n\nexport const spanWidth = (span: Span): number => span.x1 - span.x0;\n\nexport function shapeArea(shape: Shape): number {\n  return shape.reduce((acc, span) => acc + spanWidth(span), 0);\n}\n\nexport function rawShapeArea(shape: RawShape): number {\n  return Object.values(shape).reduce((acc, span) => acc + shapeArea(span), 0);\n}\n\nexport function largestShape(shapes: Shape[]): Shape {\n  return shapes.reduce((prevBestShape: Shape, shape: Shape) => {\n    const best = shapeArea(prevBestShape);\n    const area = shapeArea(shape);\n    return area > best ? shape : prevBestShape;\n  }, []);\n}\n\nexport function rectDims(rect: Rect): { w: number; h: number } {\n  return { w: rect.x1 - rect.x0, h: rect.y1 - rect.y0 };\n}\n\nexport function boundsForShape(shape: Shape): Rect {\n  const y0 = shape[0].y;\n  const y1 = shape[shape.length - 1].y;\n  const x0 = Math.min(...shape.map(({ x0 }) => x0));\n  const x1 = Math.max(...shape.map(({ x1 }) => x1));\n  return { x0, x1, y0, y1 };\n}\n\nexport function boundsForRawShape(shape: RawShape): Rect {\n  let minY = Number.MAX_SAFE_INTEGER;\n  let maxY = 0;\n  let minX = Number.MAX_SAFE_INTEGER;\n  let maxX = 0;\n  for (const row of Object.values(shape)) {\n    for (const span of row) {\n      minY = Math.min(span.y, minY);\n      maxY = Math.max(span.y, maxY);\n      minX = Math.min(span.x0, minX);\n      maxX = Math.max(span.x1, maxX);\n    }\n  }\n  return { x0: minX, y0: minY, y1: maxY, x1: maxX };\n}\n\nexport function widestSpan(shape: Span[]): Span {\n  let maxWidthSpan = shape[0];\n  for (const span of shape) {\n    if (spanWidth(span) > spanWidth(maxWidthSpan)) {\n      maxWidthSpan = span;\n    }\n  }\n  return maxWidthSpan;\n}\n\nexport function narrowestSpan(shape: Shape): Span {\n  let minWidthSpan;\n  minWidthSpan = shape.find(x => x.x0 !== 0 && x.x1 !== WIDTH - 1);\n  if (!minWidthSpan) {\n    minWidthSpan = shape[0];\n  }\n  // TODO(jon): Ideally the narrowest span doesn't hit the frame edges.\n  for (const span of shape) {\n    if (spanWidth(span) <= spanWidth(minWidthSpan)) {\n      if (span.x0 !== 0 && span.x1 !== WIDTH - 1) {\n        minWidthSpan = span;\n      }\n    }\n  }\n  return minWidthSpan;\n}\n\nexport function narrowestSlanted(shape: Shape, start: Span): [Span, Span] {\n  const nIndex = shape.indexOf(start);\n  // From the narrowest, wiggle about on each side to try to find a shorter distance between spans.\n  const startIndex = Math.max(0, nIndex - 13);\n  const endIndex = Math.min(shape.length - 1, nIndex + 13);\n  const distances = [];\n  for (let i = startIndex; i < endIndex; i++) {\n    for (let j = startIndex; j < endIndex; j++) {\n      if (i !== j) {\n        const d = distanceSq(startP(shape[i]), endP(shape[j]));\n        distances.push({\n          d,\n          skew: Math.abs(shape[i].y - shape[j].y),\n          left: shape[i],\n          right: shape[j]\n        });\n      }\n    }\n  }\n  // If there are a bunch that are similar, prefer the least slanted one.\n  distances.sort((a, b) => {\n    // NOTE(defer spans where x0 or x1 is on the edge of the frame.\n    if (a.left.x0 === 0 || a.right.x1 === WIDTH - 1) {\n      return 1;\n    } else if (b.left.x0 === 0 || b.right.x1 === WIDTH - 1) {\n      return -1;\n    }\n\n    if (a.d < b.d) {\n      return -1;\n    } else if (a.d > b.d) {\n      return 1;\n    } else {\n      if (a.skew < b.skew) {\n        return -1;\n      } else if (a.skew > a.skew) {\n        return 1;\n      } else {\n        return b.right.y + b.left.y - (a.right.y + a.left.y);\n      }\n    }\n  });\n  if (distances.length) {\n    let { left, right, skew: bestSkew } = distances[0];\n    const { d: bestD } = distances[0];\n\n    let i = 1;\n\n    while (Math.abs(Math.sqrt(distances[i].d) - Math.sqrt(bestD)) < 1) {\n      if (distances[i].skew < bestSkew) {\n        bestSkew = distances[i].skew;\n        left = distances[i].left;\n        right = distances[i].right;\n      }\n      i++;\n      if (i === distances.length) {\n        break;\n      }\n    }\n    return [left, right];\n  }\n  return [start, start];\n}\n\nexport function magnitude(vec: Vec2): number {\n  return Math.sqrt(vec.x * vec.x + vec.y * vec.y);\n}\n\nexport function normalise(vec: Vec2): Vec2 {\n  const len = magnitude(vec);\n  return {\n    x: vec.x / len,\n    y: vec.y / len\n  };\n}\n\nexport function scale(vec: Vec2, scale: number): Vec2 {\n  return {\n    x: vec.x * scale,\n    y: vec.y * scale\n  };\n}\n\nexport function perp(vec: Vec2): Vec2 {\n  // noinspection JSSuspiciousNameCombination\n  return {\n    x: vec.y,\n    y: -vec.x\n  };\n}\n\nexport function add(a: Vec2, b: Vec2): Vec2 {\n  return {\n    x: a.x + b.x,\n    y: a.y + b.y\n  };\n}\n\nexport function sub(a: Vec2, b: Vec2): Vec2 {\n  return {\n    x: a.x - b.x,\n    y: a.y - b.y\n  };\n}\n\nexport const isLeft = (l0: Point, l1: Point, p: Point): number =>\n  // Use cross-product to determine which side of a line a point is on.\n  (l1.x - l0.x) * (p.y - l0.y) - (l1.y - l0.y) * (p.x - l0.x);\n\nexport const pointIsLeftOfOrOnLine = (\n  l0: Point,\n  l1: Point,\n  p: Point\n): boolean =>\n  // Use cross-product to determine which side of a line a point is on.\n  isLeft(l0, l1, p) >= 0;\n\nexport const pointIsLeftOfLine = (l0: Point, l1: Point, p: Point): boolean =>\n  // Use cross-product to determine which side of a line a point is on.\n  isLeft(l0, l1, p) > 0;\n\nexport function isNotCeilingHeat(shape: Shape): boolean {\n  return !(shape[0].y === 0 && shape.length < 80);\n}\n\nexport interface Quad {\n  topLeft: Point;\n  topRight: Point;\n  bottomLeft: Point;\n  bottomRight: Point;\n}\n\nexport function pointIsInQuad(p: Point, quad: Quad): boolean {\n  return (\n    pointIsLeftOfLine(quad.bottomLeft, quad.topLeft, p) &&\n    pointIsLeftOfLine(quad.topRight, quad.bottomRight, p) &&\n    pointIsLeftOfLine(quad.bottomRight, quad.bottomLeft, p) &&\n    pointIsLeftOfLine(quad.topLeft, quad.topRight, p)\n  );\n}\n\nexport function drawShapesIntoMask(\n  shapes: Shape[],\n  data: Uint8Array,\n  bit: number,\n  width = 120\n) {\n  for (const shape of shapes) {\n    for (const span of shape) {\n      let i = span.x0;\n      if (span.x0 >= span.x1) {\n        console.warn(\"Weird spans\", span.x0, span.x1);\n        continue;\n      }\n      do {\n        data[span.y * width + i] |= bit;\n        i++;\n      } while (i < span.x1);\n    }\n  }\n}\n\nexport function shapeIsNotCircular(shape: Shape): boolean {\n  const dims = rectDims(boundsForShape(shape));\n  return Math.abs(dims.w - dims.h) > 4;\n}\n\nexport function shapeIsOnSide(shape: Shape): boolean {\n  for (const { x0, x1 } of shape) {\n    if (x0 === 0 || x1 === WIDTH - 1) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function closestPoint(point: Point, points: Point[]): Point {\n  let bestP;\n  let bestD = Number.MAX_SAFE_INTEGER;\n  for (const p of points) {\n    const d = distanceSq(p, point);\n    if (d < bestD) {\n      bestD = d;\n      bestP = p;\n    }\n  }\n  return bestP as Point;\n}\n\nexport function distToSegmentSquared(p: Point, v: Vec2, w: Vec2): number {\n  const l2 = distanceSq(v, w);\n  if (l2 == 0) {\n    return distanceSq(p, v);\n  }\n  let t = ((p.x - v.x) * (w.x - v.x) + (p.y - v.y) * (w.y - v.y)) / l2;\n  t = Math.max(0, Math.min(1, t));\n  return distanceSq(p, { x: v.x + t * (w.x - v.x), y: v.y + t * (w.y - v.y) });\n}\n\nexport const pointsAreEqual = (a: Point, b: Point): boolean =>\n  a.x === b.x && a.y === b.y;\nexport const pointIsInSet = (pt: Point, set: Point[]): boolean =>\n  set.find(x => pointsAreEqual(x, pt)) !== undefined;\n\nconst maxSliceLength = 5;\nexport const minYIndex = (arr: Point[]): number => {\n  let lowestY = Number.MAX_SAFE_INTEGER;\n  let lowestIndex = 0;\n  for (let i = 0; i < arr.length; i++) {\n    const y = arr[i].y;\n    if (y < lowestY) {\n      lowestY = y;\n      lowestIndex = i;\n    }\n  }\n  return lowestIndex;\n};\nexport const head = (arr: Point[]): Point[] =>\n  arr.slice(0, Math.min(maxSliceLength, arr.length - 1));\nexport const tail = (arr: Point[]): Point[] =>\n  arr.slice(\n    arr.length - 1 - Math.min(maxSliceLength, arr.length) + 1,\n    Math.min(maxSliceLength, arr.length) + 1\n  );\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// Possible states:\n// - Camera is still warming up\n//  (this should still want to find the constant heat source, because we want to make\n//   sure that's warming up at the same time)\n// - Frame is empty, no head detected.\n// - Head detected, but not centered.\n// - More than one head detected in frame.\n// - No constant heat-source detected.\n// - Head detected, and forehead isolated.\n// - Head has been front-on for x frames, with stable forehead lock.\n\n// - Other states:\n//      - Wifi has been lost (maybe don't care about this case now if we're wired?)\n//      - FFC is happening\n//      - Period *after* FFC, which we need to hide.\nimport { Component, Prop, Vue, Watch } from \"vue-property-decorator\";\nimport { mdiCog } from \"@mdi/js\";\nimport {\n  CalibrationConfig,\n  FaceInfo,\n  ScreeningEvent,\n  ScreeningState\n} from \"@/types\";\nimport { DegreesCelsius } from \"@/utils\";\nimport { LerpAmount, Shape, Span } from \"@/shape-processing\";\nimport AdminSettings from \"@/components/AdminSettings.vue\";\nimport { WARMUP_TIME_SECONDS } from \"@/main\";\nimport { boundsForShape } from \"@/geom\";\n\nfunction lerp(a: number, amt: number, b: number): number {\n  return a * amt + b * (1 - amt);\n}\n\nfunction closestY(prev: Span[], y: number): Span | undefined {\n  const best = prev\n    .map(x => ({ d: Math.abs(Number(x.y) - y), x }))\n    .sort((a, b) => b.d - a.d)\n    .pop() as { x: Span; d: number };\n  return prev.find(x => x.y === best.x.y);\n}\n\nfunction interpolateShapes(prev: Shape, amt: number, next: Shape): Shape {\n  // For each row with the same y, interpolate x0 and x0 and x1 and x1 linearly on x.\n  // Then it's a matter of figuring out what to do with the rest.\n  amt = 1 - amt;\n  const result = [];\n  // TODO(jon): Start at the bottom.\n\n  for (let i = 0; i < next.length; i++) {\n    const rowNext = next[i];\n    const y = rowNext.y;\n    if (prev[i]) {\n      // Move others across in x the same amount as the adjacent ones that *do* exist.\n      const rowPrev = prev[i];\n      result.push({\n        x0: lerp(rowPrev.x0, amt, rowNext.x0),\n        x1: lerp(rowPrev.x1, amt, rowNext.x1),\n        y: Number(y)\n      });\n    } else {\n      // What's the closest point on prev?\n      // Let's use that.\n      const rowPrev = (closestY(prev, y) as unknown) as Span;\n      // Should actually be the amount that rowPrev moved compared with\n      // it's corresponding row in rowNext.\n      result.push({\n        x0: lerp(rowPrev.x0, amt, rowNext.x0),\n        x1: lerp(rowPrev.x1, amt, rowNext.x1),\n        y: Number(y)\n      });\n    }\n  }\n  return result;\n}\n\nconst frameNum = 0;\n\nlet curveFitting: { fitCurveThroughPoints: (pts: Uint8Array) => number[] };\n\ninterface Message {\n  message: string;\n  count: number;\n}\n\nconst Sound = new Audio();\n\nfunction zeroWidthToSide(shape: Shape): Shape {\n  const bounds = boundsForShape(shape);\n  const zeroWidth = [];\n  if (bounds.x1 - bounds.x0 > 10) {\n    if (bounds.x0 <= 15) {\n      // Going off left\n      for (const span of shape) {\n        zeroWidth.push({\n          x0: 0,\n          x1: 1,\n          y: span.y\n        });\n      }\n    } else {\n      // Going off right\n      debugger;\n      for (const span of shape) {\n        zeroWidth.push({\n          x0: 118,\n          x1: 119,\n          y: span.y\n        });\n      }\n    }\n  }\n  return zeroWidth;\n}\n\n@Component({\n  components: {\n    AdminSettings\n  }\n})\nexport default class UserFacingScreening extends Vue {\n  @Prop({ required: true }) state!: ScreeningState;\n  @Prop({ required: true }) screeningEvent!: null | ScreeningEvent;\n  @Prop({ required: true }) calibration!: CalibrationConfig;\n  @Prop({ required: true }) onReferenceDevice!: boolean;\n  @Prop({ required: true }) face!: FaceInfo | null;\n  @Prop({ required: true }) shapes!: [Shape[], Shape[]];\n  @Prop({ required: true }) warmupSecondsRemaining!: number;\n\n  get isLocal(): boolean {\n    return window.location.port === \"5000\" || window.location.port === \"8080\";\n  }\n\n  private didInteract = false;\n\n  private showSettings = false;\n  private hasSettings = false;\n\n  $refs!: {\n    beziers: HTMLCanvasElement;\n  };\n\n  stateQueue: Message[] = [];\n\n  closedAdminSettings() {\n    this.showSettings = false;\n    setTimeout(() => {\n      this.hasSettings = false;\n    }, 300);\n  }\n\n  set interacted(val: boolean) {\n    this.didInteract = val;\n    setTimeout(() => (this.didInteract = false), 5000);\n  }\n\n  get interacted(): boolean {\n    return this.didInteract;\n  }\n\n  get cogIcon() {\n    return mdiCog;\n  }\n\n  async beforeMount() {\n    curveFitting = await import(\"../../curve-fit\");\n  }\n\n  mounted() {\n    window.requestAnimationFrame(this.drawBezierOutline.bind(this));\n  }\n\n  get messageText(): string {\n    if (this.isAquiring) {\n      return \"Hold still...\";\n    } else if (this.isWarmingUp) {\n      return `Warming up, <span>${this.remainingWarmupTime}</span> remaining`;\n    } else if (this.isTooFar) {\n      return \"Come closer\";\n    } else if (this.missingRef) {\n      return \"Missing reference\";\n    } else {\n      return \"Ready\";\n    }\n  }\n\n  @Watch(\"screeningEvent\")\n  onScreeningEventChange() {\n    if (this.temperatureIsNormal) {\n      const shouldPlay = JSON.parse(\n        window.localStorage.getItem(\"playNormalSound\") || \"true\"\n      );\n      if (shouldPlay) {\n        Sound.src = `${process.env.BASE_URL}sounds/341695_5858296-lq.mp3`;\n        Sound.play();\n      }\n    } else if (this.temperatureIsHigherThanNormal) {\n      const shouldPlay = JSON.parse(\n        window.localStorage.getItem(\"playWarningSound\") || \"true\"\n      );\n      if (shouldPlay) {\n        Sound.src = `${process.env.BASE_URL}sounds/445978_9159316-lq.mp3`;\n        Sound.play();\n      }\n    } else if (this.temperatureIsProbablyAnError) {\n      const shouldPlay = JSON.parse(\n        window.localStorage.getItem(\"playErrorSound\") || \"true\"\n      );\n      if (shouldPlay) {\n        Sound.src = `${process.env.BASE_URL}sounds/142608_1840739-lq.mp3`;\n        Sound.play();\n      }\n    }\n  }\n\n  drawBezierOutline() {\n    // Maybe we give the start and end shapes, and interpolate those, and convert to beziers each frame?\n    // const toRemove = [];\n    // for (const message of this.stateQueue) {\n    //   message.count--;\n    //   if (message.count === 0) {\n    //     toRemove.push(message);\n    //   }\n    // }\n    // for (const message of toRemove) {\n    //   if (this.stateQueue.length !== 1) {\n    //     //console.log(\"removing\", message.message);\n    //     this.stateQueue.splice(this.stateQueue.indexOf(message), 1);\n    //   }\n    // }\n\n    // If this is 9fps, we should interpolate ~5 frames in between.\n    // Let's try and draw a nice curve around the shape:\n    // Get the edge of the shape:\n    let ctx;\n    let canvasWidth = 810;\n    let canvasHeight = 1080;\n    if (this.$refs.beziers) {\n      const aspectRatio = 4 / 3;\n      if (navigator.userAgent.includes(\"Lenovo TB-X605LC\")) {\n        canvasHeight = document.body.getBoundingClientRect().height;\n      } else {\n        canvasHeight = (this.$refs.beziers\n          .parentElement as HTMLElement).getBoundingClientRect().height;\n      }\n      canvasWidth = canvasHeight / aspectRatio;\n      this.$refs.beziers.style.width = `${canvasWidth}px`;\n      this.$refs.beziers.style.height = `${canvasHeight}px`;\n      ctx = this.$refs.beziers.getContext(\"2d\") as CanvasRenderingContext2D;\n    }\n    if (ctx) {\n      ctx.clearRect(0, 0, 810, 1080);\n      ctx.save();\n      ctx.scale(6.75, 6.75);\n      if (this.shapes.length === 2) {\n        // TODO(jon): Would Object.freeze be a better strategy for opting out of reactivity?\n        const prevShape = this.shapes[0];\n        const nextShape = this.shapes[1];\n\n        // TODO(jon): If there's no nextShape, create one to the side that prevShape seemed to be\n        // going off on.\n        // if (\n        //   (!nextShape || !nextShape.length) &&\n        //   prevShape &&\n        //   prevShape.length\n        // ) {\n        //   nextShape.push(zeroWidthToSide(prevShape[0]));\n        // }\n        if (prevShape && nextShape && prevShape.length && nextShape.length) {\n          const interpolatedShape = interpolateShapes(\n            prevShape[0],\n            LerpAmount.amount,\n            nextShape[0]\n          );\n          // TODO(jon): This lerp amount should be frame-rate independent, so time duration between frames.\n          LerpAmount.amount += 0.166;\n          LerpAmount.amount = Math.min(1, LerpAmount.amount);\n\n          const pointsArray = new Uint8Array(interpolatedShape.length * 4);\n          let i = 0;\n          interpolatedShape.reverse();\n          for (const row of interpolatedShape) {\n            pointsArray[i++] = row.x1;\n            pointsArray[i++] = row.y;\n          }\n          interpolatedShape.reverse();\n          for (const row of interpolatedShape) {\n            pointsArray[i++] = row.x0;\n            pointsArray[i++] = row.y;\n          }\n\n          const bezierPts = curveFitting.fitCurveThroughPoints(pointsArray);\n          // TODO(jon): Run a smoothing pass on this to smooth out longer lines?\n          // Maybe have adaptive error for different parts of the curve?\n\n          if (bezierPts.length) {\n            {\n              {\n                ctx.fillStyle = \"rgba(255, 255, 255, 0.2)\";\n                ctx.strokeStyle = \"rgba(255, 255, 255, 0.2)\";\n                ctx.lineWidth = 2;\n                ctx.lineCap = \"round\";\n                // frameNum++;\n                if (frameNum % 2 === 0) {\n                  ctx.setLineDash([3, 6]);\n                } else {\n                  ctx.setLineDash([3, 4]);\n                }\n                ctx.beginPath();\n                ctx.moveTo(bezierPts[0], bezierPts[1]);\n                for (let i = 2; i < bezierPts.length; i += 6) {\n                  ctx.bezierCurveTo(\n                    bezierPts[i],\n                    bezierPts[i + 1],\n                    bezierPts[i + 2],\n                    bezierPts[i + 3],\n                    bezierPts[i + 4],\n                    bezierPts[i + 5]\n                  );\n                }\n                ctx.stroke();\n              }\n            }\n            ctx.save();\n\n            // TODO(jon): Bake this alpha mask to a texture if things seem slow.\n            ctx.globalCompositeOperation = \"destination-out\";\n            const leftGradient = ctx.createLinearGradient(0, 0, 20, 0);\n            leftGradient.addColorStop(1, \"rgba(0, 0, 0, 0)\");\n            leftGradient.addColorStop(0.25, \"rgba(0, 0, 0, 230)\");\n            leftGradient.addColorStop(0, \"rgba(0, 0, 0, 255)\");\n            const rightGradient = ctx.createLinearGradient(100, 0, 120, 0);\n            rightGradient.addColorStop(1, \"rgba(0, 0, 0, 255)\");\n            rightGradient.addColorStop(0.75, \"rgba(0, 0, 0, 230)\");\n            rightGradient.addColorStop(0, \"rgba(0, 0, 0, 0)\");\n\n            const topGradient = ctx.createLinearGradient(0, 0, 0, 10);\n            topGradient.addColorStop(0, \"rgba(0, 0, 0, 255)\");\n            topGradient.addColorStop(0.45, \"rgba(0, 0, 0, 230)\");\n            topGradient.addColorStop(1, \"rgba(0, 0, 0, 0)\");\n\n            const bottomGradient = ctx.createLinearGradient(0, 150, 0, 160);\n            bottomGradient.addColorStop(1, \"rgba(0, 0, 0, 255)\");\n            bottomGradient.addColorStop(0.75, \"rgba(0, 0, 0, 230)\");\n            bottomGradient.addColorStop(0, \"rgba(0, 0, 0, 0)\");\n\n            ctx.fillStyle = leftGradient;\n            ctx.fillRect(0, 0, 20, 160);\n            ctx.fillStyle = rightGradient;\n            ctx.fillRect(100, 0, 20, 160);\n            ctx.fillStyle = topGradient;\n            ctx.fillRect(0, 0, 120, 10);\n            ctx.fillStyle = bottomGradient;\n            ctx.fillRect(0, 150, 120, 10);\n\n            ctx.restore();\n          }\n        }\n\n        // Draw corner indicators:\n        ctx.lineWidth = 1;\n        ctx.strokeStyle = \"rgba(255, 255, 255, 0.5)\";\n        ctx.setLineDash([]);\n\n        const inset = 15;\n        const len = 10;\n        const width = 120;\n        const height = 160;\n        ctx.beginPath();\n        ctx.moveTo(inset + len, inset);\n        ctx.lineTo(inset, inset);\n        ctx.lineTo(inset, inset + len);\n\n        ctx.moveTo(inset + len, height - inset);\n        ctx.lineTo(inset, height - inset);\n        ctx.lineTo(inset, height - (inset + len));\n\n        ctx.moveTo(width - (inset + len), inset);\n        ctx.lineTo(width - inset, inset);\n        ctx.lineTo(width - inset, inset + len);\n\n        ctx.moveTo(width - (inset + len), height - inset);\n        ctx.lineTo(width - inset, height - inset);\n        ctx.lineTo(width - inset, height - (inset + len));\n        ctx.stroke();\n        ctx.restore();\n      }\n    }\n    window.requestAnimationFrame(this.drawBezierOutline.bind(this));\n  }\n\n  get temperature(): DegreesCelsius {\n    if (this.screeningEvent) {\n      return new DegreesCelsius(this.screeningEvent.face.sampleTemp);\n    }\n    return new DegreesCelsius(0);\n  }\n\n  get temperatureIsNormal(): boolean {\n    return this.temperature.val < this.calibration.thresholdMinFever;\n  }\n\n  get temperatureIsHigherThanNormal(): boolean {\n    return this.temperature.val >= this.calibration.thresholdMinFever;\n  }\n\n  get temperatureIsProbablyAnError(): boolean {\n    // TODO(jon)\n    return this.temperature.val > 42.5;\n  }\n\n  get classNameForState() {\n    return this.state.toLowerCase().replace(\"_\", \"-\");\n  }\n\n  get screeningResultClass() {\n    if (this.screeningEvent) {\n      if (this.temperatureIsNormal) {\n        return \"okay\"; // or possible-fever, or error-temp\n      } else if (this.temperatureIsHigherThanNormal) {\n        return \"possible-fever\";\n      } else if (this.temperatureIsProbablyAnError) {\n        return \"error\";\n      }\n      //debugger;\n    }\n\n    return null;\n  }\n\n  get hasScreeningResult(): boolean {\n    return this.screeningResultClass !== null;\n  }\n\n  get isTooFar(): boolean {\n    return this.state === ScreeningState.TOO_FAR;\n  }\n\n  get isWarmingUp(): boolean {\n    return this.state === ScreeningState.WARMING_UP;\n  }\n\n  get warmupBackgroundColour(): string {\n    // Lerp between\n    const hueStart = 37;\n    const saturationStart = 70;\n    const lightnessStart = 66;\n\n    const hueEnd = 198;\n    const saturationEnd = 100;\n    const lightnessEnd = 42;\n\n    const val = Math.min(\n      1,\n      (WARMUP_TIME_SECONDS - this.warmupSecondsRemaining) / WARMUP_TIME_SECONDS\n    );\n\n    const hue = lerp(hueEnd, val, hueStart);\n    const saturation = lerp(saturationEnd, val, saturationStart);\n    const lightness = lerp(lightnessEnd, val, lightnessStart);\n    return `hsl(${hue}, ${saturation}%, ${lightness}%)`;\n  }\n\n  get isAquiring(): boolean {\n    return (\n      this.state === ScreeningState.LARGE_BODY ||\n      this.state === ScreeningState.FACE_LOCK ||\n      this.state === ScreeningState.HEAD_LOCK ||\n      this.state === ScreeningState.FRONTAL_LOCK\n    );\n  }\n\n  get missingRef(): boolean {\n    return this.state === ScreeningState.MISSING_THERMAL_REF;\n  }\n\n  get remainingWarmupTime(): string {\n    const secondsRemaining = this.warmupSecondsRemaining;\n    const minsRemaining = Math.floor(secondsRemaining / 60);\n    const seconds = secondsRemaining - minsRemaining * 60;\n    return ` ${String(minsRemaining).padStart(2, \"0\")}:${String(\n      Math.floor(seconds)\n    ).padStart(2, \"0\")}`;\n  }\n\n  get message(): Message {\n    switch (this.state) {\n      case ScreeningState.WARMING_UP:\n        return { message: \"Please wait\", count: Number.MAX_SAFE_INTEGER };\n      case ScreeningState.MULTIPLE_HEADS:\n        return {\n          message: \"Only one person should be in front of the camera\",\n          count: 60\n        };\n\n      case ScreeningState.HEAD_LOCK:\n      case ScreeningState.FACE_LOCK:\n        return {\n          message: \"Please look straight ahead\",\n          count: -1\n        };\n      case ScreeningState.FRONTAL_LOCK:\n        return { message: \"Great, now hold still a moment\", count: 120 };\n      case ScreeningState.STABLE_LOCK:\n        if (this.screeningEvent) {\n          if (this.temperatureIsNormal) {\n            return { message: `Your temperature is normal`, count: 460 };\n          } else if (this.temperatureIsHigherThanNormal) {\n            return {\n              message:\n                \"Your temperature is higher than normal, please don't enter\",\n              count: 180\n            };\n          } else if (this.temperatureIsProbablyAnError) {\n            return {\n              message: \"Temperature anomaly, please check equipment\",\n              count: 360\n            };\n          }\n        }\n        break;\n      case ScreeningState.LEAVING:\n        if (this.screeningEvent) {\n          if (this.temperatureIsNormal) {\n            return { message: \"You're good to go!\", count: -1 };\n          } else {\n            return {\n              message: \"You can go, but you need to get a follow-up\",\n              count: -1\n            };\n          }\n        } else {\n          return {\n            message: \"\",\n            count: -1\n          };\n        }\n      case ScreeningState.READY:\n      default:\n        return { message: \"Ready to screen\", count: Number.MAX_SAFE_INTEGER };\n    }\n    return { message: \"\", count: 0 };\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFacingScreening.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFacingScreening.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./UserFacingScreening.vue?vue&type=template&id=fedccc62&scoped=true&\"\nimport script from \"./UserFacingScreening.vue?vue&type=script&lang=ts&\"\nexport * from \"./UserFacingScreening.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./UserFacingScreening.vue?vue&type=style&index=0&id=fedccc62&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fedccc62\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\ninstallComponents(component, {VBtn,VCard,VCardActions,VDialog,VIcon})\n","import { BlobReader } from \"./utils\";\r\nimport { FrameInfo } from \"./api/types\";\r\nimport { AnalysisResult } from \"@/types\";\r\n\r\nexport interface Frame {\r\n  frameInfo: FrameInfo;\r\n  frame: Uint16Array;\r\n  bodyShape: Uint8Array;\r\n  analysisResult: AnalysisResult;\r\n}\r\n\r\nexport interface PartialFrame {\r\n  frameInfo: FrameInfo;\r\n  frame: Uint16Array;\r\n}\r\n\r\nexport enum CameraConnectionState {\r\n  Connecting,\r\n  Connected,\r\n  Disconnected\r\n}\r\n\r\nconst UUID = new Date().getTime();\r\n\r\ninterface CameraStats {\r\n  skippedFramesServer: number;\r\n  skippedFramesClient: number;\r\n}\r\n\r\ninterface CameraState {\r\n  socket: WebSocket | null;\r\n  UUID: number;\r\n  stats: CameraStats;\r\n  prevFrameNum: number;\r\n  frames: PartialFrame[];\r\n  heartbeatInterval: number;\r\n  pendingFrame: number | null;\r\n}\r\n\r\nexport class CameraConnection {\r\n  constructor(\r\n    public host: string,\r\n    port: string,\r\n    public onFrame: (frame: PartialFrame) => void,\r\n    public onConnectionStateChange: (\r\n      connectionState: CameraConnectionState\r\n    ) => void\r\n  ) {\r\n    if (port === \"8080\" || port === \"5000\") {\r\n      // If we're running in development mode, find the remote camera server\r\n      //this.host = \"192.168.178.21\";\r\n      this.host = \"192.168.0.40\";\r\n    }\r\n    this.connect();\r\n  }\r\n  private state: CameraState = {\r\n    socket: null,\r\n    UUID: new Date().getTime(),\r\n    stats: {\r\n      skippedFramesServer: 0,\r\n      skippedFramesClient: 0\r\n    },\r\n    pendingFrame: null,\r\n    prevFrameNum: -1,\r\n    heartbeatInterval: 0,\r\n    frames: []\r\n  };\r\n\r\n  retryConnection(retryTime: number) {\r\n    if (retryTime > 0) {\r\n      setTimeout(() => this.retryConnection(retryTime - 1), 1000);\r\n    } else {\r\n      this.connect();\r\n    }\r\n  }\r\n  register() {\r\n    if (this.state.socket !== null) {\r\n      if (this.state.socket.readyState === WebSocket.OPEN) {\r\n        // We are waiting for frames now.\r\n        this.state.socket.send(\r\n          JSON.stringify({\r\n            type: \"Register\",\r\n            data: navigator.userAgent,\r\n            uuid: UUID\r\n          })\r\n        );\r\n        this.onConnectionStateChange(CameraConnectionState.Connected);\r\n\r\n        this.state.heartbeatInterval = setInterval(() => {\r\n          this.state.socket &&\r\n            this.state.socket.send(\r\n              JSON.stringify({\r\n                type: \"Heartbeat\",\r\n                uuid: UUID\r\n              })\r\n            );\r\n        }, 5000) as unknown as number;\r\n      } else {\r\n        setTimeout(this.register.bind(this), 100);\r\n      }\r\n    }\r\n  }\r\n  connect() {\r\n    this.state.socket = new WebSocket(`ws://${this.host}/ws`);\r\n    this.onConnectionStateChange(CameraConnectionState.Connecting);\r\n    this.state.socket.addEventListener(\"error\", e => {\r\n      console.warn(\"Websocket Connection error\", e);\r\n      //...\r\n    });\r\n    // Connection opened\r\n    this.state.socket.addEventListener(\"open\", this.register.bind(this));\r\n    this.state.socket.addEventListener(\"close\", () => {\r\n      // When we do reconnect, we need to treat it as a new connection\r\n      console.warn(\"Websocket closed\");\r\n      this.state.socket = null;\r\n      this.onConnectionStateChange(CameraConnectionState.Disconnected);\r\n      clearInterval(this.state.heartbeatInterval);\r\n      this.retryConnection(5);\r\n    });\r\n    this.state.socket.addEventListener(\"message\", async event => {\r\n      if (event.data instanceof Blob) {\r\n        // TODO(jon): Only do this if we detect that we're dropping frames?\r\n        const droppingFrames = false;\r\n        if (droppingFrames) {\r\n          this.state.frames.push(\r\n            (await this.parseFrame(event.data as Blob)) as PartialFrame\r\n          );\r\n          // Process the latest frame, after waiting half a frame delay\r\n          // to see if there are any more frames hot on its heels.\r\n          this.state.pendingFrame = setTimeout(\r\n            this.useLatestFrame.bind(this),\r\n            1\r\n          ) as unknown as number;\r\n        } else {\r\n          this.onFrame(\r\n            (await this.parseFrame(event.data as Blob)) as PartialFrame\r\n          );\r\n        }\r\n        // Every time we get a frame, set a new timeout for when we decide that the camera has stalled sending us new frames.\r\n      }\r\n    });\r\n  }\r\n  async parseFrame(blob: Blob): Promise<PartialFrame | null> {\r\n    // NOTE(jon): On iOS. it seems slow to do multiple fetches from the blob, so let's do it all at once.\r\n    const data = await BlobReader.arrayBuffer(blob);\r\n    const frameInfoLength = new Uint16Array(data.slice(0, 2))[0];\r\n    const frameStartOffset = 2 + frameInfoLength;\r\n    try {\r\n      const frameInfo = JSON.parse(\r\n        String.fromCharCode(...new Uint8Array(data.slice(2, frameStartOffset)))\r\n      ) as FrameInfo;\r\n\r\n      const frameNumber = frameInfo.Telemetry.FrameCount;\r\n      if (frameNumber % 20 === 0) {\r\n        performance.clearMarks();\r\n        performance.clearMeasures();\r\n        performance.clearResourceTimings();\r\n      }\r\n      performance.mark(`start frame ${frameNumber}`);\r\n      if (\r\n        this.state.prevFrameNum !== -1 &&\r\n        this.state.prevFrameNum + 1 !== frameInfo.Telemetry.FrameCount\r\n      ) {\r\n        this.state.stats.skippedFramesServer +=\r\n          frameInfo.Telemetry.FrameCount - this.state.prevFrameNum;\r\n        // Work out an fps counter.\r\n      }\r\n      this.state.prevFrameNum = frameInfo.Telemetry.FrameCount;\r\n      const frameSizeInBytes =\r\n        frameInfo.Camera.ResX * frameInfo.Camera.ResY * 2;\r\n      // TODO(jon): Some perf optimisations here.\r\n      const frame = new Uint16Array(\r\n        data.slice(frameStartOffset, frameStartOffset + frameSizeInBytes)\r\n      );\r\n      return {\r\n        frameInfo,\r\n        frame\r\n      };\r\n    } catch (e) {\r\n      console.error(\"Malformed JSON payload\", e);\r\n    }\r\n    return null;\r\n  }\r\n  async useLatestFrame() {\r\n    if (this.state.pendingFrame) {\r\n      clearTimeout(this.state.pendingFrame);\r\n    }\r\n    let latestFrameTimeOnMs = 0;\r\n    let latestFrame: PartialFrame | null = null;\r\n    // Turns out that we don't always get the messages in order from the pi, so make sure we take the latest one.\r\n    const framesToDrop: PartialFrame[] = [];\r\n    while (this.state.frames.length !== 0) {\r\n      const frame = this.state.frames.shift() as PartialFrame;\r\n      const frameHeader = frame.frameInfo;\r\n      const timeOn = frameHeader.Telemetry.TimeOn / 1000 / 1000;\r\n      if (timeOn > latestFrameTimeOnMs) {\r\n        if (latestFrame !== null) {\r\n          framesToDrop.push(latestFrame);\r\n        }\r\n        latestFrameTimeOnMs = timeOn;\r\n        latestFrame = frame;\r\n      }\r\n    }\r\n    // Clear out and log any old frames that need to be dropped\r\n    while (framesToDrop.length !== 0) {\r\n      const dropFrame = framesToDrop.shift() as PartialFrame;\r\n      const timeOn = dropFrame.frameInfo.Telemetry.TimeOn / 1000 / 1000;\r\n      this.state.stats.skippedFramesClient++;\r\n      if (this.state.socket) {\r\n        (this.state.socket as WebSocket).send(\r\n          JSON.stringify({\r\n            type: \"Dropped late frame\",\r\n            data: `${latestFrameTimeOnMs - timeOn}ms behind current: frame#${\r\n              dropFrame.frameInfo.Telemetry.FrameCount\r\n            }`,\r\n            uuid: UUID\r\n          })\r\n        );\r\n      } else {\r\n        console.warn(\"Lost web socket connection\");\r\n      }\r\n    }\r\n\r\n    // Take the latest frame and process it.\r\n    if (latestFrame !== null) {\r\n      await this.onFrame(latestFrame);\r\n      // if (DEBUG_MODE) {\r\n      //   updateFpsCounter(skippedFramesServer, skippedFramesClient);\r\n      // } else if (fpsCount.innerText !== \"\") {\r\n      //   fpsCount.innerText = \"\";\r\n      // }\r\n    }\r\n    this.state.stats.skippedFramesClient = 0;\r\n    this.state.stats.skippedFramesServer = 0;\r\n  }\r\n}\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport UserFacingScreening from \"@/components/UserFacingScreening.vue\";\nimport { Component, Vue } from \"vue-property-decorator\";\nimport { CameraConnectionState, Frame } from \"@/camera\";\nimport FrameListenerWorker from \"worker-loader!./frame-listener\";\nimport { CalibrationInfo, FrameInfo } from \"@/api/types\";\nimport { DeviceApi, ScreeningApi } from \"@/api/api\";\nimport {\n  AppState,\n  BoundingBox,\n  CropBox,\n  FaceInfo,\n  ScreeningEvent,\n  ScreeningState,\n  ThermalReference\n} from \"@/types\";\nimport { checkForSoftwareUpdates, DegreesCelsius } from \"@/utils\";\nimport { ImmutableShape, LerpAmount } from \"@/shape-processing\";\nimport {\n  FFC_SAFETY_DURATION_SECONDS,\n  State,\n  WARMUP_TIME_SECONDS\n} from \"@/main\";\nimport VideoStream from \"@/components/VideoStream.vue\";\nimport { FrameMessage } from \"@/frame-listener\";\n\n@Component({\n  components: {\n    UserFacingScreening,\n    VideoStream\n  }\n})\nexport default class App extends Vue {\n  private deviceID = 0;\n  private deviceName = \"\";\n  private appState: AppState = State;\n  private appVersion = \"\";\n  private isNotFullscreen = true;\n  private showUpdatedCalibrationSnackbar = false;\n  private prevFrameInfo: FrameInfo | null = null;\n  private droppedDebugFile = false;\n  private frameCounter = 0;\n  get isReferenceDevice(): boolean {\n    return (\n      window.navigator.userAgent.includes(\"Lenovo TB-X605LC\") ||\n      this.isRunningInAndroidWebview\n    );\n  }\n\n  get isRunningInAndroidWebview(): boolean {\n    return window.navigator.userAgent === \"feverscreen-app\";\n  }\n\n  get isFakeReferenceDevice(): boolean {\n    return window.navigator.userAgent.includes(\"Fake\");\n  }\n  async enableFullscreen() {\n    try {\n      await document.body.requestFullscreen();\n      this.isNotFullscreen = false;\n    } catch (e) {\n      return;\n    }\n  }\n  get isAdminScreen(): boolean {\n    return true;\n  }\n\n  private thresholdValue = 0;\n  private skippedWarmup = false;\n  private prevShape: ImmutableShape[] = [];\n  private nextShape: ImmutableShape[] = [];\n\n  public get playingLocal(): boolean {\n    return this.droppedDebugFile;\n  }\n\n  $refs!: {\n    debugCanvas: HTMLCanvasElement;\n  };\n\n  private skipWarmup() {\n    this.skippedWarmup = true;\n  }\n\n  public get currentFrameCount(): number {\n    // NOTE(jon): This is always zero if it's the fake thermal camera.\n    if ((this.appState.currentFrame as Frame).frameInfo) {\n      return (this.appState.currentFrame as Frame).frameInfo.Telemetry\n        .FrameCount;\n    }\n    return 0;\n  }\n\n  updateCalibration(nextCalibration: CalibrationInfo, firstLoad = false) {\n    if (!firstLoad && this.appState.uuid !== nextCalibration.UuidOfUpdater) {\n      this.showUpdatedCalibrationSnackbar = true;\n      setTimeout(() => {\n        this.showUpdatedCalibrationSnackbar = false;\n      }, 3000);\n    }\n    this.appState.currentCalibration.thermalRefTemperature = new DegreesCelsius(\n      nextCalibration.ThermalRefTemp\n    );\n    this.appState.currentCalibration.calibrationTemperature = new DegreesCelsius(\n      nextCalibration.TemperatureCelsius\n    );\n    this.appState.currentCalibration.thresholdMinFever =\n      nextCalibration.ThresholdMinFever;\n    this.appState.currentCalibration.cropBox = {\n      top: nextCalibration.Top,\n      right: nextCalibration.Right,\n      bottom: nextCalibration.Bottom,\n      left: nextCalibration.Left\n    };\n  }\n\n  onCropChanged(cropBox: CropBox) {\n    this.appState.currentCalibration.cropBox = cropBox;\n  }\n\n  saveCropChanges() {\n    console.log(\n      \"save crop changes\",\n      JSON.parse(JSON.stringify(this.appState.currentCalibration.cropBox))\n    );\n  }\n\n  get calibratedTemp(): DegreesCelsius {\n    return this.appState.currentCalibration.calibrationTemperature;\n  }\n\n  get currentFrame(): Frame {\n    return this.appState.currentFrame as Frame;\n  }\n\n  get timeOnInSeconds(): number {\n    if (this.prevFrameInfo) {\n      const telemetry = this.prevFrameInfo.Telemetry;\n      let timeOnSecs;\n      // NOTE: TimeOn is in nanoseconds when coming from the camera server,\n      //  but in milliseconds when coming from a CPTV file - should make these the same.\n      if (this.useLiveCamera) {\n        timeOnSecs = telemetry.TimeOn / 1000 / 1000 / 1000;\n      } else {\n        timeOnSecs = telemetry.TimeOn / 1000;\n      }\n      return timeOnSecs;\n    }\n    return WARMUP_TIME_SECONDS;\n  }\n\n  get isWarmingUp(): boolean {\n    return !this.skippedWarmup && this.timeOnInSeconds < WARMUP_TIME_SECONDS;\n  }\n\n  get remainingWarmupTime(): number {\n    if (this.skippedWarmup) {\n      return 0;\n    }\n    return Math.max(0, WARMUP_TIME_SECONDS - this.timeOnInSeconds);\n  }\n\n  get isDuringFFCEvent(): boolean {\n    if (!this.isWarmingUp && this.prevFrameInfo) {\n      const telemetry = this.prevFrameInfo.Telemetry;\n      // TODO(jon): This needs to change based on whether camera is live or not\n      return (\n        (telemetry.TimeOn - telemetry.LastFFCTime) / 1000 <\n        FFC_SAFETY_DURATION_SECONDS\n      );\n    }\n    return false;\n  }\n\n  get isGettingFrames(): boolean {\n    // Did we receive any frames in the past second?\n    return this.appState.lastFrameTime > new Date().getTime() - 1000;\n  }\n\n  get isConnected(): boolean {\n    return (\n      this.appState.cameraConnectionState === CameraConnectionState.Connected\n    );\n  }\n\n  get isConnecting(): boolean {\n    return (\n      this.appState.cameraConnectionState === CameraConnectionState.Connecting\n    );\n  }\n\n  get cropBoxPixelBounds(): BoundingBox {\n    const cropBox = this.appState.currentCalibration.cropBox;\n    let width = 120;\n    let height = 160;\n    if (this.prevFrameInfo) {\n      const { ResX, ResY } = this.prevFrameInfo.Camera;\n      width = ResX;\n      height = ResY;\n    }\n    const onePercentWidth = width / 100;\n    const onePercentHeight = height / 100;\n    return {\n      x0: Math.floor(onePercentWidth * cropBox.left),\n      x1: width - Math.floor(onePercentWidth * cropBox.right),\n      y0: Math.floor(onePercentHeight * cropBox.top),\n      y1: height - Math.floor(onePercentHeight * cropBox.bottom)\n    };\n  }\n\n  private updateBodyOutline(body: Uint8Array) {\n    this.prevShape = this.nextShape;\n    const shape = [];\n    for (let i = 0; i < body.length; i += 3) {\n      const y = body[i];\n      const x0 = body[i + 1];\n      const x1 = body[i + 2];\n      shape.push({ x0, x1, y });\n    }\n    LerpAmount.amount = 0.0;\n    if (shape.length) {\n      this.nextShape = [Object.freeze(shape)];\n    } else {\n      this.nextShape = [];\n    }\n  }\n\n  private checkForSoftwareUpdatesThisFrame(frame: Frame) {\n    const newLine = frame.frameInfo.AppVersion.indexOf(\"\\n\");\n    if (newLine !== -1) {\n      frame.frameInfo.AppVersion = frame.frameInfo.AppVersion.substring(\n        0,\n        newLine\n      );\n    }\n    // Did the software get updated?\n    checkForSoftwareUpdates(\n      frame.frameInfo.BinaryVersion,\n      frame.frameInfo.AppVersion\n    );\n  }\n\n  private checkForCalibrationUpdatesThisFrame(frame: Frame) {\n    if (this.prevFrameInfo) {\n      const prevCalibration = JSON.stringify(this.prevFrameInfo.Calibration);\n      const nextCalibration = JSON.stringify(frame.frameInfo.Calibration);\n      if (prevCalibration !== nextCalibration) {\n        this.updateCalibration(frame.frameInfo.Calibration);\n      }\n    }\n  }\n\n  private async onFrame(frame: Frame) {\n    const frameNumber = frame.frameInfo.Telemetry.FrameCount;\n    this.checkForSoftwareUpdatesThisFrame(frame);\n    this.checkForCalibrationUpdatesThisFrame(frame);\n    this.updateBodyOutline(frame.bodyShape);\n    if (!this.isWarmingUp) {\n      this.appState.lastFrameTime = new Date().getTime();\n      const prevScreeningState = this.appState.currentScreeningState;\n      const nextScreeningState = frame.analysisResult.nextState;\n      if (\n        prevScreeningState === ScreeningState.STABLE_LOCK &&\n        nextScreeningState === ScreeningState.LEAVING\n      ) {\n        const face = frame.analysisResult.face;\n        const thermalRef = frame.analysisResult.thermalRef;\n        this.snapshotScreeningEvent(thermalRef, face, frame, {\n          ...face.samplePoint,\n          v: face.sampleValue,\n          t: face.sampleTemp\n        });\n      } else if (\n        prevScreeningState === ScreeningState.LEAVING &&\n        nextScreeningState === ScreeningState.READY\n      ) {\n        if (this.isReferenceDevice) {\n          ScreeningApi.recordScreeningEvent(\n            this.deviceName,\n            this.deviceID,\n            this.appState.currentScreeningEvent as ScreeningEvent\n          );\n        }\n        this.appState.currentScreeningEvent = null;\n      }\n      this.appState.currentScreeningState = nextScreeningState;\n    } else {\n      this.appState.currentScreeningState = ScreeningState.WARMING_UP;\n    }\n    this.appState.currentFrame = frame;\n    this.prevFrameInfo = frame.frameInfo;\n    this.frameCounter++;\n  }\n\n  snapshotScreeningEvent(\n    thermalReference: ThermalReference,\n    face: FaceInfo,\n    frame: Frame,\n    sample: { x: number; y: number; v: number; t: number }\n  ) {\n    this.appState.currentScreeningEvent = {\n      rawTemperatureValue: sample.v,\n      calculatedValue: sample.t,\n      sampleX: sample.x,\n      sampleY: sample.y,\n      frame, // Really, we should be able to recreate the temperature value just from the frame + telemetry?\n      timestamp: new Date(),\n      thermalReference,\n      face\n    };\n    return;\n  }\n\n  onConnectionStateChange(connection: CameraConnectionState) {\n    this.appState.cameraConnectionState = connection;\n  }\n\n  private showSoftwareVersionUpdatedPrompt = false;\n  private useLiveCamera = true;\n\n  async created() {\n    // Update the AppState:\n    if (this.useLiveCamera) {\n      this.appState.uuid = new Date().getTime();\n      const existingCalibration = await DeviceApi.getCalibration();\n      this.updateCalibration(existingCalibration, true);\n      const { appVersion, binaryVersion } = await DeviceApi.softwareVersion();\n      const { deviceID, devicename } = await DeviceApi.deviceInfo();\n      this.deviceID = deviceID;\n      this.deviceName = devicename;\n      const newLine = appVersion.indexOf(\"\\n\");\n      let newAppVersion = appVersion;\n      if (newLine !== -1) {\n        newAppVersion = newAppVersion.substring(0, newLine);\n      }\n      this.appVersion = newAppVersion;\n      if (checkForSoftwareUpdates(binaryVersion, newAppVersion, false)) {\n        this.showSoftwareVersionUpdatedPrompt = true;\n      }\n    }\n    const frameListener = new FrameListenerWorker();\n    frameListener.onmessage = message => {\n      const frameMessage = message.data as FrameMessage;\n      switch (frameMessage.type) {\n        case \"gotFrame\":\n          {\n            this.onFrame(frameMessage.payload as Frame);\n          }\n          break;\n        case \"connectionStateChange\":\n          this.onConnectionStateChange(\n            frameMessage.payload as CameraConnectionState\n          );\n          break;\n      }\n    };\n    frameListener.postMessage({\n      useLiveCamera: this.useLiveCamera,\n      hostname: window.location.hostname,\n      port: window.location.port,\n      cptvFileToPlayback: \"/cptv-files/0.7.5beta recording-1 2708.cptv\"\n    });\n  }\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=5afe35cc&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VSnackbar } from 'vuetify/lib/components/VSnackbar';\ninstallComponents(component, {VApp,VBtn,VCard,VCardActions,VCardTitle,VDialog,VSnackbar})\n","import Vue from \"vue\";\r\nimport Vuetify from \"vuetify/lib\";\r\nVue.use(Vuetify);\r\n\r\nexport default new Vuetify({\r\n  icons: {\r\n    iconfont: \"mdiSvg\"\r\n  }\r\n});\r\n","import Vue from \"vue\";\nimport App from \"./App.vue\";\nimport vuetify from \"./plugins/vuetify\";\nimport { AppState, ScreeningState } from \"@/types\";\nimport { CameraConnectionState } from \"@/camera\";\nimport { DegreesCelsius } from \"@/utils\";\n\nVue.config.productionTip = false;\nexport const DEFAULT_THRESHOLD_MIN_NORMAL = 32.5;\nexport const DEFAULT_THRESHOLD_MIN_FEVER = 37.8;\nexport const WARMUP_TIME_SECONDS = 30 * 60; // 30 mins\nexport const FFC_SAFETY_DURATION_SECONDS = 5;\n\nexport const State: AppState = {\n  currentFrame: null,\n  cameraConnectionState: CameraConnectionState.Disconnected,\n  face: null,\n  paused: false,\n  currentCalibration: {\n    calibrationTemperature: new DegreesCelsius(36),\n    thermalReferenceRawValue: 30000,\n    hotspotRawTemperatureValue: 31000,\n    timestamp: new Date(),\n    cropBox: {\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    },\n    thresholdMinFever: DEFAULT_THRESHOLD_MIN_FEVER,\n    thermalRefTemperature: new DegreesCelsius(0)\n  },\n  currentScreeningEvent: null,\n  currentScreeningState: ScreeningState.INIT,\n  currentScreeningStateFrameCount: -1,\n  lastFrameTime: 0,\n  uuid: 0,\n  analysisResult: {\n    thresholdSum: 0,\n    motionThresholdSum: 0,\n    heatStats: {\n      max: 0,\n      min: 0,\n      threshold: 0\n    },\n    face: {\n      isValid: false,\n      headLock: 0,\n      halfwayRatio: 0.0,\n      samplePoint: { x: 0, y: 0 },\n      sampleValue: 0,\n      sampleTemp: 0,\n      head: {\n        topLeft: { x: 0, y: 0 },\n        topRight: { x: 0, y: 0 },\n        bottomLeft: { x: 0, y: 0 },\n        bottomRight: { x: 0, y: 0 }\n      }\n    },\n    thermalRef: {\n      geom: {\n        center: {\n          x: 0,\n          y: 0\n        },\n        radius: 0\n      },\n      val: 0,\n      temp: 0\n    },\n    hasBody: false,\n    nextState: ScreeningState.INIT,\n    motionSum: 0,\n    frameBottomSum: 0\n  }\n};\n\n/*\n//these are the *lowest* temperature in celsius for each category\nlet GThreshold_error = 42.5;\nlet GThreshold_fever = 37.8;\nlet GThreshold_check = 37.4;\nlet GThreshold_normal = 35.7;\n */\n\nnew Vue({\n  vuetify,\n  render: h => h(App)\n}).$mount(\"#app\");\n","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"2a148c6e6b03053f579c.worker.js\");\n};","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CalibrationSettings.vue?vue&type=style&index=0&id=24c81863&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CalibrationSettings.vue?vue&type=style&index=0&id=24c81863&scoped=true&lang=scss&\""],"sourceRoot":""}